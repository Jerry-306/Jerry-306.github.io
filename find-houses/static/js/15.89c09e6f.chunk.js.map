{"version":3,"sources":["components/MyNavBar/index.jsx","components/MyNavBar/index.module.css","../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","components/HouseItem/index.jsx","components/HouseItem/index.module.css","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","utils/history.js","pages/Map/index.module.css","pages/Map/index.jsx"],"names":["withRouter","children","className","history","rightContent","onLeftClick","styles","navbar","join","mode","icon","goBack","module","exports","require","Object","defineProperty","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","leftContent","restProps","createElement","role","onClick","Component","defaultProps","HouseItem","src","title","desc","tags","price","style","house","imgWrap","img","alt","content","tagList","map","tag","index","tagClass","priceNum","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","F","n","done","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","HISTORY","getHistory","JSON","parse","localStorage","getItem","setHistory","setItem","stringify","addHistory","oldHistory","newHistory","h","houseCode","push","pop","unshift","BMapGL","window","Map","myMap","useState","housesList","sethousesList","isShowList","setisShowList","useEffect","label","Geocoder","getPoint","point","a","centerAndZoom","enableScrollWheelZoom","setTilt","addControl","ScaleControl","ZoomControl","LocationControl","renderOverlays","info","addEventListener","id","loading","API","get","res","hide","data","body","getTypeAndZoom","nextZoom","type","forEach","item","createOverlays","zoom","getZoom","coord","longitude","latitude","areaName","count","areaPoint","Point","createCircle","createRect","name","Label","position","offset","Size","setContent","bubble","setTimeout","clearOverlays","addOverlay","rect","housename","housenum","arrow","getHousesList","list","container","houseList","show","titleWrap","listTitle","titleMore","to","houseItems","BASE_URL","houseImg"],"mappings":"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","file":"static/js/15.89c09e6f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { NavBar } from \"antd-mobile\";\r\nimport styles from \"./index.module.css\";\r\n\r\nfunction MyNavBar({ \r\n  children,\r\n  className,\r\n  history,\r\n  rightContent,\r\n  onLeftClick \r\n}) {\r\n  // 默认点击返回按钮事件\r\n  const defaultClick = () => history.goBack();\r\n  return (\r\n    <div>\r\n      <NavBar\r\n        className={[styles.navbar, className || \"\"].join(\" \")}\r\n        mode=\"light\"\r\n        icon={<i className=\"iconfont icon-back\" />}\r\n        onLeftClick={onLeftClick || defaultClick}\r\n        rightContent={rightContent}\r\n      >\r\n        {children}\r\n      </NavBar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(MyNavBar);\r\n/* \r\n此组件用于封装顶部导航栏\r\n只有路由组件才有history 等API\r\n于是， 利用 withRouter（）函数 包裹一般组件，就可以把一般组件变成路由组件 \r\n*/","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"MyNavBar_navbar__2081X\"};","'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar NavBar = function (_React$Component) {\n    (0, _inherits3['default'])(NavBar, _React$Component);\n\n    function NavBar() {\n        (0, _classCallCheck3['default'])(this, NavBar);\n        return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(NavBar, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                className = _a.className,\n                children = _a.children,\n                mode = _a.mode,\n                icon = _a.icon,\n                onLeftClick = _a.onLeftClick,\n                leftContent = _a.leftContent,\n                rightContent = _a.rightContent,\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n            return React.createElement(\n                'div',\n                (0, _extends3['default'])({}, restProps, { className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode) }),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-left', role: 'button', onClick: onLeftClick },\n                    icon ?\n                    // tslint:disable-next-line:jsx-no-multiline-js\n                    React.createElement(\n                        'span',\n                        { className: prefixCls + '-left-icon', 'aria-hidden': 'true' },\n                        icon\n                    ) : null,\n                    leftContent\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-title' },\n                    children\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-right' },\n                    rightContent\n                )\n            );\n        }\n    }]);\n    return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\n\nNavBar.defaultProps = {\n    prefixCls: 'am-navbar',\n    mode: 'dark',\n    onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","import React from \"react\";\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function HouseItem({\r\n  src,\r\n  title,\r\n  desc,\r\n  tags,\r\n  price,\r\n  style,\r\n  onClick,\r\n}) {\r\n  return (\r\n    <div className={styles.house} style={style} onClick={onClick}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div className={styles.tagList}>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = \"tag\" + ((index % 4) + 1);\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(\" \")}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__1cXau\",\"imgWrap\":\"HouseItem_imgWrap__Ebyag\",\"img\":\"HouseItem_img__3Gfx5\",\"content\":\"HouseItem_content__3Fn82\",\"title\":\"HouseItem_title__2BNW_\",\"desc\":\"HouseItem_desc__2WDon\",\"price\":\"HouseItem_price__38LRv\",\"priceNum\":\"HouseItem_priceNum__OMBEX\",\"tagList\":\"HouseItem_tagList__SEWGN\",\"tag\":\"HouseItem_tag__2U--L\",\"tag1\":\"HouseItem_tag1__2dC88\",\"tag2\":\"HouseItem_tag2__oeffO\",\"tag3\":\"HouseItem_tag3__36aPC\",\"tag4\":\"HouseItem_tag4__1yPMl\"};","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","// 该文件涉及 token 的一些处理方法\r\n\r\nconst HISTORY = \"history\";\r\n\r\n// 获取history\r\nconst getHistory = () => JSON.parse(localStorage.getItem(HISTORY));\r\n\r\n// 设置history\r\nconst setHistory = (value) =>\r\n  localStorage.setItem(HISTORY, JSON.stringify(value));\r\n\r\n// 判断是否有历史记录\r\nconst hasHistory = () => !!getHistory();\r\n\r\nconst addHistory = (house) => {\r\n  if (hasHistory()) {\r\n    const oldHistory = getHistory();\r\n    const newHistory = [];\r\n    // 去重\r\n    for (let h of oldHistory) {\r\n      if (h.houseCode !== house.houseCode) {\r\n        newHistory.push(h);\r\n      }\r\n    }\r\n    // 限制浏览记录长度为100\r\n    if (newHistory.length >= 100) {\r\n      newHistory.pop();\r\n    }\r\n    newHistory.unshift(house);\r\n    setHistory(newHistory);\r\n  } else {\r\n    setHistory([house]);\r\n  }\r\n};\r\n\r\nexport { addHistory, getHistory, setHistory, hasHistory };\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"Map_map__2R92D\",\"container\":\"Map_container__1Ta2C\",\"bubble\":\"Map_bubble__EAWfu\",\"name\":\"Map_name__14WHP\",\"rect\":\"Map_rect__1cosh\",\"arrow\":\"Map_arrow__2dRH4\",\"housename\":\"Map_housename__2Y21d\",\"housenum\":\"Map_housenum__lBdCy\",\"houseList\":\"Map_houseList__1VQpB\",\"show\":\"Map_show__3gBms\",\"titleWrap\":\"Map_titleWrap__eLIXR\",\"listTitle\":\"Map_listTitle__ITEMh\",\"titleMore\":\"Map_titleMore__tdJIR\",\"houseItems\":\"Map_houseItems__2i2nF\"};","import React, { useState, useEffect } from \"react\";\r\nimport API from \"../../utils/api\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport { BASE_URL } from \"../../utils/url\";\r\nimport MyNavBar from \"../../components/MyNavBar\";\r\nimport HouseItem from \"../../components/HouseItem\";\r\nimport { addHistory } from \"../../utils/history\";\r\nimport styles from \"./index.module.css\";\r\n\r\nconst BMapGL = window.BMapGL;\r\nexport default function Map(props) {\r\n  const [housesList, sethousesList] = useState([]);\r\n  const [isShowList, setisShowList] = useState(false);\r\n  let myMap;\r\n  // 创建地图并进行相应从初始化\r\n  useEffect(() => {\r\n    // 初始化地图实例\r\n    const map = new BMapGL.Map(\"container\");\r\n    // 获取当前定位城市\r\n    const { label, value } = JSON.parse(localStorage.getItem(\"zfy_city\"));\r\n    // 在其他方法中通过 this 来获取到地图对象\r\n    myMap = map;\r\n    //创建地址解析器实例\r\n    const myGeo = new BMapGL.Geocoder();\r\n    // 将地址解析结果显示在地图上，并调整地图视野\r\n    myGeo.getPoint(\r\n      label,\r\n      async (point) => {\r\n        if (point) {\r\n          // 定位到中心点坐标\r\n          map.centerAndZoom(point, 12);\r\n          // 开启鼠标滚轮缩放\r\n          map.enableScrollWheelZoom(true);\r\n          // 设置地图初始倾斜角度n\r\n          map.setTilt(20);\r\n          // 添加比例尺控件\r\n          map.addControl(new BMapGL.ScaleControl());\r\n          // 添加缩放控件\r\n          map.addControl(new BMapGL.ZoomControl());\r\n          // 添加定位控件\r\n          map.addControl(new BMapGL.LocationControl());\r\n\r\n          // 调用 renderOverlays 方法\r\n          renderOverlays(value);\r\n        } else {\r\n          Toast.info(\"您选择的地址没有解析到结果!\", 1, null, false);\r\n        }\r\n      },\r\n      label\r\n    );\r\n\r\n    // 给地图绑定移动事件\r\n    map.addEventListener(\"movestart\", () => {\r\n      if (isShowList) {\r\n        setisShowList(false);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // 渲染覆盖物入口\r\n  // 1 接收区域 id 参数，获取该区域下的房源数据\r\n  // 2 获取房源类型以及下级地图缩放级别\r\n  const renderOverlays = async (id) => {\r\n    try {\r\n      Toast.loading(\"Loading...\", 0, null, false);\r\n      const res = await API.get(`/area/map?id=${id}`);\r\n      Toast.hide();\r\n      const data = res.data.body;\r\n\r\n      // 调用 getTypeAndZoom 方法获取级别和类型\r\n      const { nextZoom, type } = getTypeAndZoom();\r\n\r\n      data.forEach((item) => {\r\n        // 创建覆盖物\r\n        createOverlays(item, nextZoom, type);\r\n      });\r\n    } catch (error) {\r\n      Toast.hide();\r\n    }\r\n  };\r\n\r\n  // 计算要绘制的覆盖物类型和下一个缩放级别\r\n  // 区   -> 12 ，范围：>=11 <13\r\n  // 镇   -> 14 ，范围：>=13 <15\r\n  // 小区 -> 16 ，范围：>=15 <17\r\n  const getTypeAndZoom = () => {\r\n    // 调用地图的 getZoom() 方法，来获取当前缩放级别\r\n    const zoom = myMap.getZoom();\r\n    let nextZoom, type;\r\n\r\n    if (zoom >= 11 && zoom < 13) {\r\n      // 此时地图级别为区，下一个缩放级别为镇：\r\n      nextZoom = 14;\r\n      // circle 表示绘制圆形覆盖物的形状\r\n      type = \"circle\";\r\n    } else if (zoom >= 13 && zoom < 15) {\r\n      // 镇\r\n      nextZoom = 16;\r\n      type = \"circle\";\r\n    } else if (zoom >= 15 && zoom < 17) {\r\n      // 小区\r\n      type = \"rect\";\r\n    }\r\n\r\n    return {\r\n      nextZoom,\r\n      type,\r\n    };\r\n  };\r\n\r\n  // 创建覆盖物\r\n  const createOverlays = (item, zoom, type) => {\r\n    const {\r\n      coord: { longitude, latitude },\r\n      label: areaName,\r\n      count,\r\n      value,\r\n    } = item;\r\n\r\n    // 创建坐标对象\r\n    const areaPoint = new BMapGL.Point(longitude, latitude);\r\n    if (type === \"circle\") {\r\n      createCircle(areaPoint, areaName, count, value, zoom);\r\n    } else {\r\n      createRect(areaPoint, areaName, count, value);\r\n    }\r\n  };\r\n\r\n  // 创建圆形覆盖物（区、镇覆盖物）\r\n  const createCircle = (point, name, count, id, zoom) => {\r\n    // 创建覆盖物\r\n    const label = new BMapGL.Label(\"\", {\r\n      position: point,\r\n      offset: new BMapGL.Size(-25, -25),\r\n    });\r\n\r\n    // 设置房源覆盖物内容\r\n    label.setContent(`\r\n            <div class=\"${styles.bubble}\">\r\n                <p class=\"${styles.name}\">${name}</p>\r\n                <p>${count}套</p>\r\n            </div>\r\n        `);\r\n\r\n    // 添加单击事件\r\n    label.addEventListener(\"click\", () => {\r\n      // 调用 renderOverlays 方法，获取该区域下的房源数据\r\n      renderOverlays(id);\r\n\r\n      // 放大地图，以当前点击的覆盖物为中心放大地图\r\n      myMap.centerAndZoom(point, zoom);\r\n\r\n      // 解决清除覆盖物时，百度地图API的JS文件自身报错的问题\r\n      setTimeout(() => {\r\n        // 清除当前覆盖物信息\r\n        myMap.clearOverlays();\r\n      }, 0);\r\n    });\r\n    // 添加覆盖物到地图中\r\n    myMap.addOverlay(label);\r\n  };\r\n\r\n  // 创建矩形覆盖物（小区覆盖物）\r\n  const createRect = (point, name, count, id) => {\r\n    // 创建覆盖物\r\n    const label = new BMapGL.Label(\"\", {\r\n      position: point,\r\n      offset: new BMapGL.Size(-50, -28),\r\n    });\r\n\r\n    // 设置房源覆盖物内容\r\n    label.setContent(`\r\n            <div class=\"${styles.rect}\">\r\n                <span class=\"${styles.housename}\">${name}</span>\r\n                <span class=\"${styles.housenum}\">${count}套</span>\r\n                <i class=\"${styles.arrow}\"></i>\r\n            </div>\r\n        `);\r\n\r\n    // 添加单击事件\r\n    label.addEventListener(\"click\", (e) => {\r\n      getHousesList(id);\r\n    });\r\n\r\n    // 添加覆盖物到地图中\r\n    myMap.addOverlay(label);\r\n  };\r\n\r\n  // 获取小区房源数据\r\n  const getHousesList = async (id) => {\r\n    try {\r\n      Toast.loading(\"Loading...\", 0, null, false);\r\n      const res = await API.get(`/houses?cityId=${id}`);\r\n      Toast.hide();\r\n      sethousesList(res.data.body.list);\r\n      setisShowList(true);\r\n    } catch (error) {\r\n      Toast.hide();\r\n    }\r\n  };\r\n\r\n  // 封装渲染房屋列表的方法\r\n  const renderHousesList = () => {\r\n    const handleClick = (house) => {\r\n      props.history.push(`/detail/${house.houseCode}`);\r\n      // 添加浏览记录\r\n      addHistory(house);\r\n    };\r\n    return housesList.map((item) => (\r\n      <HouseItem\r\n        key={item.houseCode}\r\n        // 图片地址\r\n        src={BASE_URL + item.houseImg}\r\n        onClick={() => handleClick(item)}\r\n        title={item.title}\r\n        desc={item.desc}\r\n        tags={item.tags}\r\n        price={item.price}\r\n      />\r\n    ));\r\n  };\r\n  return (\r\n    <div className={styles.map}>\r\n      {/* 顶部导航韩 */}\r\n      <MyNavBar>地图找房</MyNavBar>\r\n      {/* 地图容器 */}\r\n      <div id=\"container\" className={styles.container} />\r\n      {/* 房源列表 */}\r\n      {/* 添加 styles.show 展示房屋列表 */}\r\n      <div\r\n        className={[styles.houseList, isShowList ? styles.show : \"\"].join(\" \")}\r\n      >\r\n        <div className={styles.titleWrap}>\r\n          <h1 className={styles.listTitle}>房屋列表</h1>\r\n          <Link className={styles.titleMore} to=\"/home/list\">\r\n            更多房源\r\n          </Link>\r\n        </div>\r\n        <div className={styles.houseItems}>\r\n          {/* 房屋结构 */}\r\n          {renderHousesList()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}