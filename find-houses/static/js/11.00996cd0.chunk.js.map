{"version":3,"sources":["components/NoHouse/index.jsx","components/NoHouse/index.module.css","components/HouseItem/index.jsx","components/HouseItem/index.module.css","utils/history.js","components/FilterFooter/index.jsx","components/FilterFooter/index.module.css","pages/HouseList/components/FilterMore/index.module.css","pages/HouseList/components/FilterTitle/index.module.css","pages/HouseList/components/Filter/index.module.css","components/Sticky/index.module.css","pages/HouseList/index.module.css","pages/HouseList/components/FilterMore/index.jsx","pages/HouseList/components/FilterPicker/index.jsx","pages/HouseList/components/FilterTitle/index.jsx","pages/HouseList/components/Filter/index.jsx","components/Sticky/index.jsx","pages/HouseList/index.jsx"],"names":["NoHouse","props","className","styles","root","img","src","BASE_URL","alt","msg","children","module","exports","HouseItem","title","desc","tags","price","style","onClick","house","imgWrap","content","tagList","map","tag","index","tagClass","join","priceNum","HISTORY","getHistory","JSON","parse","localStorage","getItem","setHistory","value","setItem","stringify","addHistory","oldHistory","newHistory","h","houseCode","push","length","pop","unshift","FilterFooter","cancelText","okText","onCancel","onOk","btn","cancel","ok","FilterMore","useState","defaultValues","selectedValues","setselectedValues","renderFilters","data","item","isSelected","includes","tagActive","array","indexOf","splice","onTagClick","label","characteristic","floor","oriented","roomType","name","child","buttons","type","onSave","FilterPicker","ddefaultValue","setvalue","cols","onChange","defaultTitleList","FilterTitle","titleSelectedStatus","align","Item","dropdown","selected","titleSelectedDefaultStatus","area","mode","more","selectedDefaultValues","Filter","settitleSelectedStatus","openType","setopenType","filtersData","setfiltersData","useEffect","getFiltersData","a","API","get","res","body","document","newTitleSelectedStatus","selectedVal","newSelectedValues","filters","areaKey","areaValue","onFilter","from","opacity","to","div","mask","Object","keys","forEach","key","subway","rentType","renderFilterPicker","renderFilterMore","Sticky","height","placeholderRef","useRef","contentRef","handleScroll","current","getBoundingClientRect","top","classList","add","fixed","remove","window","addEventListener","removeEventListener","ref","HouseList","setlabel","isLoading","setisLoading","setfilters","list","setlist","count","setcount","searchHouseList","getCurrentCity","loading","params","cityId","start","end","hide","info","renderHouseList","history","houseImg","isRowLoaded","loadMoreRows","startIndex","stopIndex","Promise","resolve","then","header","goBack","SearchHeader","currentCity","searchHeader","scrollTo","houseItems","rowCount","onRowsRendered","registerChild","isScrolling","scrollTop","width","autoHeight","rowHeight","rowRenderer"],"mappings":"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","file":"static/js/11.00996cd0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { BASE_URL } from \"../../utils/url\";\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function NoHouse(props) {\r\n  return (\r\n    <div className={styles.root}>\r\n      <img\r\n        className={styles.img}\r\n        src={BASE_URL + \"/img/not-found.png\"}\r\n        alt=\"暂无数据\"\r\n      />\r\n      <p className={styles.msg}>{props.children}</p>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NoHouse_root__1yaeC\",\"img\":\"NoHouse_img__2wejl\",\"msg\":\"NoHouse_msg__2Qeb2\"};","import React from \"react\";\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function HouseItem({\r\n  src,\r\n  title,\r\n  desc,\r\n  tags,\r\n  price,\r\n  style,\r\n  onClick,\r\n}) {\r\n  return (\r\n    <div className={styles.house} style={style} onClick={onClick}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div className={styles.tagList}>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = \"tag\" + ((index % 4) + 1);\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(\" \")}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__1cXau\",\"imgWrap\":\"HouseItem_imgWrap__Ebyag\",\"img\":\"HouseItem_img__3Gfx5\",\"content\":\"HouseItem_content__3Fn82\",\"title\":\"HouseItem_title__2BNW_\",\"desc\":\"HouseItem_desc__2WDon\",\"price\":\"HouseItem_price__38LRv\",\"priceNum\":\"HouseItem_priceNum__OMBEX\",\"tagList\":\"HouseItem_tagList__SEWGN\",\"tag\":\"HouseItem_tag__2U--L\",\"tag1\":\"HouseItem_tag1__2dC88\",\"tag2\":\"HouseItem_tag2__oeffO\",\"tag3\":\"HouseItem_tag3__36aPC\",\"tag4\":\"HouseItem_tag4__1yPMl\"};","// 该文件涉及 token 的一些处理方法\r\n\r\nconst HISTORY = \"history\";\r\n\r\n// 获取history\r\nconst getHistory = () => JSON.parse(localStorage.getItem(HISTORY));\r\n\r\n// 设置history\r\nconst setHistory = (value) =>\r\n  localStorage.setItem(HISTORY, JSON.stringify(value));\r\n\r\n// 判断是否有历史记录\r\nconst hasHistory = () => !!getHistory();\r\n\r\nconst addHistory = (house) => {\r\n  if (hasHistory()) {\r\n    const oldHistory = getHistory();\r\n    const newHistory = [];\r\n    // 去重\r\n    for (let h of oldHistory) {\r\n      if (h.houseCode !== house.houseCode) {\r\n        newHistory.push(h);\r\n      }\r\n    }\r\n    // 限制浏览记录长度为100\r\n    if (newHistory.length >= 100) {\r\n      newHistory.pop();\r\n    }\r\n    newHistory.unshift(house);\r\n    setHistory(newHistory);\r\n  } else {\r\n    setHistory([house]);\r\n  }\r\n};\r\n\r\nexport { addHistory, getHistory, setHistory, hasHistory };\r\n","import React from \"react\";\r\nimport { Flex } from \"antd-mobile\";\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function FilterFooter({\r\n  cancelText,\r\n  okText,\r\n  onCancel,\r\n  onOk,\r\n  className,\r\n}) {\r\n  return (\r\n    <Flex className={[styles.root, className || \"\"].join(\" \")}>\r\n      {/* 取消按钮 */}\r\n      <span\r\n        className={[styles.btn, styles.cancel].join(\" \")}\r\n        onClick={onCancel}\r\n      >\r\n        {cancelText ? cancelText : \"取消\"}\r\n      </span>\r\n\r\n      {/* 确定按钮 */}\r\n      <span className={[styles.btn, styles.ok].join(\" \")} onClick={onOk}>\r\n        {okText ? okText : \"确定\"}\r\n      </span>\r\n    </Flex>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterFooter_root__28I6t\",\"btn\":\"FilterFooter_btn__31uMw\",\"cancel\":\"FilterFooter_cancel__2BU2d\",\"ok\":\"FilterFooter_ok__3IUZi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterMore_root__3oXJp\",\"tags\":\"FilterMore_tags__NkoiP\",\"name\":\"FilterMore_name__11zBJ\",\"child\":\"FilterMore_child__3lsGS\",\"tag\":\"FilterMore_tag__8Z9DC\",\"tagActive\":\"FilterMore_tagActive__3lnFs\",\"buttons\":\"FilterMore_buttons__zB8nq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterTitle_root__wIM9H\",\"dropdown\":\"FilterTitle_dropdown__2xkgM\",\"selected\":\"FilterTitle_selected__qVToG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Filter_root__2dVWT\",\"mask\":\"Filter_mask__1SNEt\",\"content\":\"Filter_content__3ft5u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixed\":\"Sticky_fixed__52kcw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"HouseList_header__1Wa7p\",\"searchHeader\":\"HouseList_searchHeader__1lhV7\",\"houseItems\":\"HouseList_houseItems__1Pknw\",\"loading\":\"HouseList_loading__2k07p\"};","import React, { useState } from \"react\";\r\nimport FilterFooter from \"../../../../components/FilterFooter\";\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function FilterMore(props) {\r\n  const [selectedValues, setselectedValues] = useState(props.defaultValues);\r\n\r\n  const onTagClick = (value) => {\r\n    let array = [...selectedValues];\r\n\r\n    // 如果选中值中已经有当前值，说明用户此时再次点击该标签，那么就取消当前标签高亮效果\r\n    if (selectedValues.includes(value)) {\r\n      const index = array.indexOf(value);\r\n      // 删除该标签\r\n      array.splice(index, 1);\r\n    } else {\r\n      array.push(value);\r\n    }\r\n    setselectedValues(array);\r\n  };\r\n\r\n  // 清空选项\r\n  const onCancel = () => {\r\n    setselectedValues([]);\r\n  };\r\n\r\n  // 确认按钮事件\r\n  const onOk = () => {\r\n    const { type, onSave } = props;\r\n    onSave(type, selectedValues);\r\n  };\r\n\r\n  // 渲染标签\r\n  const renderFilters = (data) => {\r\n    // 高亮类名： styles.tagActive\r\n    return data.map((item) => {\r\n      // 判断选中数组中是否有当前标签值\r\n      const isSelected = selectedValues.includes(item.value);\r\n      return (\r\n        <div\r\n          key={item.value}\r\n          className={[styles.tag, isSelected ? styles.tagActive : \"\"].join(\" \")}\r\n          onClick={() => onTagClick(item.value)}\r\n        >\r\n          {item.label}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  const { characteristic, floor, oriented, roomType } = props.data;\r\n  return (\r\n    <div className={styles.root}>\r\n      {/* 条件内容 */}\r\n      <p>更多选项</p>\r\n      <div className={styles.tags}>\r\n        <div className={styles.name}>户型</div>\r\n        <div className={styles.child}>{renderFilters(roomType)}</div>\r\n\r\n        <div className={styles.name}>楼层</div>\r\n        <div className={styles.child}>{renderFilters(floor)}</div>\r\n\r\n        <div className={styles.name}>朝向</div>\r\n        <div className={styles.child}>{renderFilters(oriented)}</div>\r\n\r\n        <div className={styles.name}>特色</div>\r\n        <div className={styles.child}>{renderFilters(characteristic)}</div>\r\n      </div>\r\n      <FilterFooter\r\n        className={styles.buttons}\r\n        cancelText=\"清除\"\r\n        onCancel={onCancel}\r\n        onOk={onOk}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { PickerView } from \"antd-mobile\";\r\nimport FilterFooter from \"../../../../components/FilterFooter\";\r\nexport default function FilterPicker(props) {\r\n  const [value, setvalue] = useState(props.ddefaultValue);\r\n  const { onCancel, onSave, data, cols, type } = props;\r\n  return (\r\n    <>\r\n      <PickerView\r\n        data={data}\r\n        value={value}\r\n        cols={cols}\r\n        onChange={(value) => setvalue(value)}\r\n      />\r\n      <FilterFooter\r\n        onCancel={() => onCancel(type)}\r\n        onOk={() => onSave(type, value)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Flex } from \"antd-mobile\";\r\nimport styles from \"./index.module.css\";\r\n\r\nconst defaultTitleList = [\r\n  { title: \"区域\", type: \"area\" },\r\n  { title: \"方式\", type: \"mode\" },\r\n  { title: \"价格\", type: \"price\" },\r\n  { title: \"筛选\", type: \"more\" },\r\n];\r\n\r\nexport default function FilterTitle(props) {\r\n  const { titleSelectedStatus, onClick } = props;\r\n  return (\r\n    <Flex align=\"center\" className={styles.root}>\r\n      {defaultTitleList.map((item) => {\r\n        const isSelected = titleSelectedStatus[item.type];\r\n        return (\r\n          <Flex.Item key={item.type} onClick={() => onClick(item.type)}>\r\n            <span\r\n              className={[\r\n                styles.dropdown,\r\n                isSelected ? styles.selected : \"\",\r\n              ].join(\" \")}\r\n            >\r\n              <span>{item.title}</span>\r\n              <i className=\"iconfont icon-arrow\" />\r\n            </span>\r\n          </Flex.Item>\r\n        );\r\n      })}\r\n    </Flex>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\n// 导入Spring 组件\r\nimport { Spring, animated } from \"react-spring\";\r\n\r\nimport FilterMore from \"../FilterMore\";\r\nimport FilterPicker from \"../FilterPicker\";\r\nimport FilterTitle from \"../FilterTitle\";\r\n\r\nimport API from \"../../../../utils/api\";\r\n\r\nimport styles from \"./index.module.css\";\r\n\r\n// 标题栏数组\r\nconst titleSelectedDefaultStatus = {\r\n  area: false,\r\n  mode: false,\r\n  price: false,\r\n  more: false,\r\n};\r\n\r\n// FilterOicker 默认选中值\r\nconst selectedDefaultValues = {\r\n  area: [\"area\", \"null\"],\r\n  mode: [\"null\"],\r\n  price: [\"null\"],\r\n  more: [],\r\n};\r\n\r\nexport default function Filter(props) {\r\n  const [titleSelectedStatus, settitleSelectedStatus] = useState(\r\n    titleSelectedDefaultStatus\r\n  );\r\n  const [openType, setopenType] = useState(\"\");\r\n  const [filtersData, setfiltersData] = useState({});\r\n  const [selectedValues, setselectedValues] = useState(selectedDefaultValues);\r\n\r\n  useEffect(() => {\r\n    const getFiltersData = async () => {\r\n      // 获取当前定位城市id\r\n      const { value } = JSON.parse(localStorage.getItem(\"zfy_city\"));\r\n      const res = await API.get(`/houses/condition?id=${value}`);\r\n      setfiltersData(res.data.body);\r\n    };\r\n    getFiltersData();\r\n  }, []);\r\n\r\n  // 取消（隐藏）对话框\r\n  const onCancel = (type) => {\r\n    document.body.className = \"\";\r\n    let newTitleSelectedStatus = { ...titleSelectedStatus };\r\n    const selectedVal = selectedValues[type];\r\n    if (\r\n      type === \"area\" &&\r\n      (selectedVal.length !== 2 || selectedVal[0] !== \"area\")\r\n    ) {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else if (type === \"mode\" && selectedVal[0] !== \"null\") {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else if (type === \"price\" && selectedVal[0] !== \"null\") {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else if (type === \"more\" && selectedVal.length !== 0) {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else {\r\n      newTitleSelectedStatus[type] = false;\r\n    }\r\n\r\n    setopenType(\"\");\r\n    settitleSelectedStatus(newTitleSelectedStatus);\r\n  };\r\n\r\n  // 确定\r\n  const onSave = (type, value) => {\r\n    document.body.className = \"\";\r\n    // 判断标题选中状态\r\n    let newTitleSelectedStatus = { ...titleSelectedStatus };\r\n\r\n    const selectedVal = value;\r\n\r\n    if (\r\n      type === \"area\" &&\r\n      (selectedVal.length !== 2 || selectedVal[0] !== \"area\")\r\n    ) {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else if (type === \"mode\" && selectedVal[0] !== \"null\") {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else if (type === \"price\" && selectedVal[0] !== \"null\") {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else if (type === \"more\" && selectedVal.length !== 0) {\r\n      newTitleSelectedStatus[type] = true;\r\n    } else {\r\n      newTitleSelectedStatus[type] = false;\r\n    }\r\n\r\n    // 重构筛选值\r\n    const newSelectedValues = {\r\n      // ES6 语法 state.selectedValues[type] 的属性值会覆盖之前 [type] 对应的属性值\r\n      ...selectedValues,\r\n      [type]: value,\r\n    };\r\n\r\n    // 筛选条件数据\r\n    const filters = {};\r\n    const { area, mode, price, more } = newSelectedValues;\r\n\r\n    // 区域\r\n    const areaKey = area[0];\r\n    let areaValue = \"null\";\r\n    if (area.length === 3) {\r\n      areaValue = area[2] !== \"null\" ? area[2] : area[1];\r\n    }\r\n    filters[areaKey] = areaValue;\r\n\r\n    // 方式、租金\r\n    filters.mode = mode[0];\r\n    filters.price = price[0];\r\n\r\n    // 特色\r\n    filters.more = more.join(\",\");\r\n\r\n    // 调用父组件的方法，把筛选数据传递给父组件\r\n    props.onFilter(filters);\r\n\r\n    // 更新状态\r\n    setopenType(\"\");\r\n    settitleSelectedStatus(newTitleSelectedStatus);\r\n    setselectedValues(newSelectedValues);\r\n  };\r\n\r\n  // 改变标题颜色\r\n  const onTitleClick = (type) => {\r\n    document.body.className = \"body-fixed\";\r\n    let newTitleSelectedStatus = { ...titleSelectedStatus };\r\n\r\n    // console.log(selectedValues);\r\n    // 根据 selectedValues 里状态判断 哪些标题被选中\r\n    Object.keys(titleSelectedStatus).forEach((key) => {\r\n      if (key === type) {\r\n        // 当前选中状态\r\n        newTitleSelectedStatus[key] = true;\r\n        return;\r\n      }\r\n\r\n      // 其他标题\r\n      const selectedVal = selectedValues[key];\r\n      if (\r\n        key === \"area\" &&\r\n        (selectedVal.length !== 2 || selectedVal[0] !== \"area\")\r\n      ) {\r\n        newTitleSelectedStatus[key] = true;\r\n      } else if (key === \"mode\" && selectedVal[0] !== \"null\") {\r\n        newTitleSelectedStatus[key] = true;\r\n      } else if (key === \"price\" && selectedVal[0] !== \"null\") {\r\n        newTitleSelectedStatus[key] = true;\r\n      } else if (key === \"more\" && selectedVal.length !== 0) {\r\n        newTitleSelectedStatus[key] = true;\r\n      } else {\r\n        newTitleSelectedStatus[key] = false;\r\n      }\r\n    });\r\n    setopenType(type);\r\n    settitleSelectedStatus(newTitleSelectedStatus);\r\n  };\r\n\r\n  // 渲染 FilterPicker 组件方法\r\n  const renderFilterPicker = () => {\r\n    const { area, subway, rentType, price } = filtersData;\r\n\r\n    if (openType !== \"area\" && openType !== \"mode\" && openType !== \"price\") {\r\n      return null;\r\n    } else {\r\n      let data = [];\r\n      let cols = 1;\r\n      let ddefaultValue = selectedValues[openType];\r\n      switch (openType) {\r\n        case \"area\":\r\n          data = [area, subway];\r\n          cols = 3;\r\n          break;\r\n        case \"mode\":\r\n          data = rentType;\r\n          break;\r\n        case \"price\":\r\n          data = price;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      return (\r\n        <FilterPicker\r\n          key={openType}\r\n          data={data}\r\n          cols={cols}\r\n          type={openType}\r\n          ddefaultValue={ddefaultValue}\r\n          onCancel={onCancel}\r\n          onSave={onSave}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  // 渲染 FilterMore 组件方法\r\n  const renderFilterMore = () => {\r\n    //  characteristic, floor, oriented, roomType\r\n    const { characteristic, floor, oriented, roomType } = filtersData;\r\n\r\n    const data = { characteristic, floor, oriented, roomType };\r\n    const defaultValues = selectedValues.more;\r\n    if (openType === \"more\") {\r\n      return (\r\n        <FilterMore\r\n          data={data}\r\n          defaultValues={defaultValues}\r\n          type={openType}\r\n          onSave={onSave}\r\n          onCancel={onCancel}\r\n        />\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // 渲染遮罩层\r\n  const renderMask = () => {\r\n    if (openType === \"\") {\r\n      return null;\r\n    } else {\r\n      return (\r\n        <Spring from={{ opacity: 0 }} to={{ opacity: 1 }}>\r\n          {(props) => {\r\n            return (\r\n              <animated.div\r\n                style={props}\r\n                className={styles.mask}\r\n                onClick={() => onCancel(openType)}\r\n              />\r\n            );\r\n          }}\r\n        </Spring>\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className={styles.root}>\r\n      {/* 遮罩层组件 */}\r\n      {renderMask()}\r\n\r\n      {/* 内容组件 */}\r\n      <div className={styles.content}>\r\n        {/* 标题栏 */}\r\n        <FilterTitle\r\n          titleSelectedStatus={titleSelectedStatus}\r\n          onClick={onTitleClick}\r\n        />\r\n\r\n        {/* 前三个菜单对应内容 */}\r\n        {renderFilterPicker()}\r\n\r\n        {/* 最后一个菜单对应内容 */}\r\n        {renderFilterMore()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function Sticky({ height, children }) {\r\n  // 监听 scroll 事件\r\n  const placeholderRef = useRef(null);\r\n  const contentRef = useRef(null);\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (placeholderRef.current === null) return;\r\n      const { top } = placeholderRef.current.getBoundingClientRect();\r\n      if (top < 0) {\r\n        //吸顶\r\n        contentRef.current.classList.add(styles.fixed);\r\n        placeholderRef.current.style.height = `${height}px`;\r\n      } else {\r\n        contentRef.current.classList.remove(styles.fixed);\r\n        placeholderRef.current.style.height = \"0px\";\r\n      }\r\n    };\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, [height]);\r\n\r\n  return (\r\n    <div>\r\n      {/* 占位元素 */}\r\n      <div ref={placeholderRef} />\r\n      {/* 内容元素 */}\r\n      <div ref={contentRef}>{children}</div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Flex, Toast } from \"antd-mobile\";\r\nimport {\r\n  List,\r\n  AutoSizer,\r\n  WindowScroller,\r\n  InfiniteLoader,\r\n} from \"react-virtualized\";\r\n// 导入搜素导航栏\r\nimport SearchHeader from \"../../components/SearchHeader\";\r\n// 导入筛选栏组件\r\nimport Filter from \"./components/Filter\";\r\n// 导入房屋列表组件\r\nimport HouseItem from \"../../components/HouseItem\";\r\n// 导入吸顶组件\r\nimport Sticky from \"../../components/Sticky\";\r\n// 导入没有房源提示组件\r\nimport NoHouse from \"../../components/NoHouse\";\r\nimport { getCurrentCity } from \"../../utils/index\";\r\n\r\nimport API from \"../../utils/api\";\r\nimport { addHistory } from \"../../utils/history\";\r\n\r\nimport { BASE_URL } from \"../../utils/url\";\r\n\r\n// 导入样式\r\nimport styles from \"./index.module.css\";\r\n\r\nexport default function HouseList(props) {\r\n  const [label, setlabel] = useState(\"\");\r\n  const [value, setvalue] = useState(\"\");\r\n  const [isLoading, setisLoading] = useState(false);\r\n  const [filters, setfilters] = useState({});\r\n  const [list, setlist] = useState([]);\r\n  const [count, setcount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // 获取房屋列表数据\r\n    const searchHouseList = async () => {\r\n      const { label, value } = await getCurrentCity();\r\n      setlabel(label);\r\n      setvalue(value);\r\n      setisLoading(true);\r\n      Toast.loading(\"Loading...\", 0, null, false);\r\n      const res = await API.get(\"/houses\", {\r\n        params: {\r\n          cityId: value,\r\n          ...filters,\r\n          start: 1,\r\n          end: 30,\r\n        },\r\n      });\r\n\r\n      const { list, count } = res.data.body;\r\n      setlist(list);\r\n      setcount(count);\r\n      setisLoading(false);\r\n      Toast.hide();\r\n      if (count !== 0) {\r\n        Toast.info(`共找到 ${count} 套房源`, 2, null, false);\r\n      }\r\n    };\r\n    searchHouseList();\r\n  }, [filters]);\r\n\r\n  // 接收Filter 组件中房屋筛选条件数据\r\n  const onFilter = (filters) => {\r\n    setfilters(filters);\r\n    // 点击确定按钮时， 页面回到顶部\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  // List组件渲染每一行的方法：\r\n  const renderHouseList = ({ key, index, style }) => {\r\n    const handleClick = () => {\r\n      props.history.push(`/detail/${house.houseCode}`);\r\n      // 添加浏览记录\r\n      addHistory(house);\r\n    };\r\n    // 根据index获取每一行的数据\r\n    const house = list[index];\r\n\r\n    if (!house) {\r\n      return (\r\n        <div key={key} style={style} className={styles.loading}>\r\n          <p>Loading...</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <HouseItem\r\n        key={key}\r\n        onClick={handleClick}\r\n        style={style}\r\n        src={BASE_URL + house.houseImg}\r\n        title={house.title}\r\n        desc={house.desc}\r\n        tags={house.tags}\r\n        price={house.price}\r\n      />\r\n    );\r\n  };\r\n\r\n  // 渲染列表项\r\n  const renderHouseItem = () => {\r\n    if (count === 0 && !isLoading) {\r\n      return <NoHouse>没有找到合适房源，换个条件试试吧 ~ ~</NoHouse>;\r\n    }\r\n\r\n    return (\r\n      <InfiniteLoader\r\n        isRowLoaded={isRowLoaded}\r\n        loadMoreRows={loadMoreRows}\r\n        rowCount={count}\r\n      >\r\n        {({ onRowsRendered, registerChild }) => (\r\n          <WindowScroller>\r\n            {({ height, isScrolling, scrollTop }) => (\r\n              <AutoSizer>\r\n                {({ width }) => (\r\n                  <List\r\n                    onRowsRendered={onRowsRendered}\r\n                    ref={registerChild}\r\n                    autoHeight\r\n                    width={width} // 视口宽度\r\n                    height={height} // 视口高度\r\n                    rowCount={count} // 行数\r\n                    rowHeight={120} // 行高\r\n                    rowRenderer={renderHouseList} // 渲染每一行\r\n                    isScrolling={isScrolling}\r\n                    scrollTop={scrollTop}\r\n                  />\r\n                )}\r\n              </AutoSizer>\r\n            )}\r\n          </WindowScroller>\r\n        )}\r\n      </InfiniteLoader>\r\n    );\r\n  };\r\n\r\n  // 判断列表中每一行数据是否加载完成\r\n  const isRowLoaded = ({ index }) => {\r\n    return !!list[index];\r\n  };\r\n\r\n  // 获取更多房屋列表数据  该方法返回 Peomise 对象, 并且数据加载完时要被解决\r\n  const loadMoreRows = ({ startIndex, stopIndex }) => {\r\n    return new Promise((resolve) => {\r\n      API.get(\"/houses\", {\r\n        params: {\r\n          cityId: value,\r\n          ...filters,\r\n          start: startIndex,\r\n          end: stopIndex,\r\n        },\r\n      }).then((res) => {\r\n        setlist([...list, ...res.data.body.list]);\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      {/* 搜索导航栏 */}\r\n      <Flex className={styles.header}>\r\n        <i\r\n          className=\"iconfont icon-back\"\r\n          onClick={() => props.history.goBack()}\r\n        />\r\n        <SearchHeader currentCity={label} className={styles.searchHeader} />\r\n      </Flex>\r\n\r\n      {/* 分选栏 */}\r\n      <Sticky height={40}>\r\n        <Filter onFilter={onFilter} />\r\n      </Sticky>\r\n\r\n      {/* 房屋列表 */}\r\n      <div className={styles.houseItems}>{renderHouseItem()}</div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}