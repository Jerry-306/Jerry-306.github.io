{"version":3,"sources":["components/MyNavBar/index.js","components/MyNavBar/index.module.css","components/FilterFooter/index.js","components/HousePackage/index.js","components/HousePackage/index.module.css","components/FilterFooter/index.module.css","pages/Rent/Add/index.module.css","pages/Rent/Add/index.js"],"names":["MyNavBar","defaultClick","props","history","goBack","this","children","className","rightContent","onLeftClick","styles","navbar","join","mode","icon","Component","withRouter","module","exports","FilterFooter","cancelText","okText","onCancel","onOk","root","btn","cancel","onClick","ok","HOUSE_PACKAGE","id","name","HousePackage","state","selectedNames","toggleSelect","newSelectedNames","includes","index","indexOf","splice","onSelect","setState","list","select","filter","item","map","isActive","active","renderItems","defaultProps","Item","floorData","label","value","roomTypeData","orientedData","alert","RentAdd","text","onPress","onSubmit","a","loading","tempSlides","community","supporting","title","price","roomType","size","oriented","floor","description","houseImg","length","form","FormData","forEach","append","file","API","post","headers","res","data","body","hide","status","info","push","getValue","handleHouseImg","files","handleSupporting","selectedVlalues","location","tags","renderHeader","arrow","extra","placeholder","type","onChange","val","cols","multiple","imagePicker","rows","buttons"],"mappings":"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","file":"static/js/17.592bbfcb.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport {withRouter} from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\nimport {NavBar} from 'antd-mobile'\r\nimport styles from './index.module.css'\r\n\r\nclass MyNavBar extends Component {\r\n    // 属性校验\r\n    static propTypes = {\r\n        children: PropTypes.string.isRequired,\r\n        onLeftClick: PropTypes.func,\r\n        className: PropTypes.string,\r\n        rightContent: PropTypes.array\r\n    }\r\n\r\n    // 默认点击返回按钮事件\r\n    defaultClick = () => this.props.history.goBack();\r\n    render() {\r\n        const {children, className, rightContent, onLeftClick} = this.props;\r\n        return (\r\n            <div>\r\n                <NavBar\r\n                    className={[styles.navbar, className || ''].join(' ')}\r\n                    mode=\"light\"\r\n                    icon={<i className=\"iconfont icon-back\"/>}\r\n                    onLeftClick={onLeftClick || this.defaultClick} \r\n                    rightContent={rightContent}\r\n                >\r\n                    {children}\r\n                </NavBar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(MyNavBar);\r\n/* \r\n此组件用于封装顶部导航栏\r\n只有路由组件才有history 等API\r\n于是， 利用 withRouter（）函数 包裹一般组件，就可以把一般组件变成路由组件 \r\n*/","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"MyNavBar_navbar__39ut8\"};","import React, { Component } from 'react'\r\nimport {Flex} from 'antd-mobile'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './index.module.css'\r\n\r\n\r\nexport default class FilterFooter extends Component {\r\n\r\n    static propTypes = {\r\n        cancelText: PropTypes.string,\r\n        okText: PropTypes.string,\r\n        onCancel: PropTypes.func.isRequired,\r\n        onOk: PropTypes.func.isRequired,\r\n        className: PropTypes.string\r\n    }\r\n    \r\n    render() {\r\n        const {cancelText, okText, onCancel, onOk, className} = this.props;\r\n        return (\r\n            <Flex className={[styles.root, className ||''].join(' ')}>\r\n                {/* 取消按钮 */}\r\n                <span className={[styles.btn, styles.cancel].join(' ')} onClick={onCancel}>\r\n                    {cancelText ? cancelText : '取消'}\r\n                </span>\r\n\r\n                {/* 确定按钮 */}\r\n                <span className={[styles.btn, styles.ok].join(' ')} onClick={onOk}>\r\n                    {okText ? okText : '确定'}\r\n                </span>\r\n            </Flex>\r\n        )\r\n    }\r\n}\r\n\r\n","// 房屋配置组件（热水器、洗衣机……）\r\nimport React, { Component } from 'react'\r\nimport styles from './index.module.css'\r\n\r\nconst HOUSE_PACKAGE = [\r\n    {\r\n        id: 1,\r\n        name: '衣柜',\r\n        icon: 'icon-wardrobe'\r\n    },\r\n    {\r\n        id: 2,\r\n        name: '洗衣机',\r\n        icon: 'icon-wash'\r\n    },    \r\n    {\r\n        id: 3,\r\n        name: '空调',\r\n        icon: 'icon-air'\r\n    },    \r\n    {\r\n        id: 4,\r\n        name: '天然气',\r\n        icon: 'icon-gas'\r\n    },    \r\n    {\r\n        id: 5,\r\n        name: '冰箱',\r\n        icon: 'icon-ref'\r\n    },\r\n    {\r\n        id: 6,\r\n        name: '暖气',\r\n        icon: 'icon-Heat'\r\n    },\r\n    {\r\n        id: 7,\r\n        name: '电视',\r\n        icon: 'icon-vid'\r\n    },\r\n    {\r\n        id: 8,\r\n        name: '热水器',\r\n        icon: 'icon-heater'\r\n    },\r\n    {\r\n        id: 9,\r\n        name: '宽带',\r\n        icon: 'icon-broadband'\r\n    },\r\n    {\r\n        id: 10,\r\n        name: '沙发',\r\n        icon: 'icon-sofa'\r\n    }\r\n];\r\n\r\nclass HousePackage extends Component {\r\n    state = {\r\n        selectedNames: []\r\n    }\r\n\r\n    // 根据id判断选中状态\r\n    toggleSelect = name => {\r\n        const { selectedNames } = this.state;\r\n        let newSelectedNames = [];\r\n\r\n        if (selectedNames.includes(name)) {\r\n            let index = selectedNames.indexOf(name);\r\n            selectedNames.splice(index, 1);\r\n            newSelectedNames = selectedNames;\r\n        } else {\r\n            newSelectedNames = [...selectedNames, name];\r\n        }\r\n\r\n        // 将数据传递给父组件\r\n        this.props.onSelect(newSelectedNames);\r\n\r\n        this.setState({\r\n            selectedNames: newSelectedNames\r\n        })\r\n    }\r\n\r\n    renderItems () {\r\n        const {list, select} = this.props;\r\n        if (list) {\r\n            const values = HOUSE_PACKAGE.filter(item => list.includes(item.name));\r\n            return values.map( item => {\r\n                return (\r\n                    <div key={item.id} className={styles.item}>\r\n                        <i className={['iconfont', styles.icon, item.icon].join(' ')} />\r\n                        {item.name}\r\n                    </div>\r\n                )\r\n            })\r\n        } else if (select) {\r\n            const { selectedNames } = this.state;\r\n            return HOUSE_PACKAGE.map( item => {\r\n                const isActive = selectedNames.includes(item.name);\r\n                return (\r\n                    <div key={item.id} className={[styles.item, isActive ? styles.active : ''].join(' ')}\r\n                        onClick={() => this.toggleSelect(item.name)}\r\n                    >\r\n                        <i className={['iconfont', styles.icon, item.icon].join(' ')} />\r\n                        {item.name}\r\n                    </div>\r\n                )\r\n            })\r\n        } else {\r\n            return '啥也没传递'\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <div className={styles.root}>{this.renderItems()}</div>\r\n    }\r\n}\r\n\r\nHousePackage.defaultProps = {\r\n    onSelect: () => {}\r\n}\r\n\r\nexport default HousePackage","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"HousePackage_root__3MASA\",\"item\":\"HousePackage_item__2hfJ8\",\"icon\":\"HousePackage_icon__1SVQj\",\"active\":\"HousePackage_active__2livD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterFooter_root__Yumkx\",\"btn\":\"FilterFooter_btn__RbP6d\",\"cancel\":\"FilterFooter_cancel__2PizR\",\"ok\":\"FilterFooter_ok__3igOM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Add_root__1uoG2\",\"buttons\":\"Add_buttons__MLWFP\"};","import React, { Component } from 'react'\r\nimport { List,  InputItem, Picker, ImagePicker, TextareaItem, Modal, Toast } from 'antd-mobile'\r\n\r\nimport HousePackage from '../../../components/HousePackage'\r\nimport MyNavBar from '../../../components/MyNavBar'\r\nimport FilterFooter from '../../../components/FilterFooter'\r\n\r\nimport API from '../../../utils/api'\r\nimport styles from './index.module.css'\r\n\r\nconst Item = List.Item;\r\n\r\nconst  floorData = [\r\n    {label: \"高楼层\", value: \"FLOOR|1\"},\r\n    {label: \"中楼层\", value: \"FLOOR|2\"},\r\n    {label: \"低楼层\", value: \"FLOOR|3\"}\r\n]; \r\nconst roomTypeData = [\r\n    {label: \"一室\", value: \"ROOM|d4a692e4-a177-37fd\"},\r\n    {label: \"二室\", value: \"ROOM|d1a00384-5801-d5cd\"},\r\n    {label: \"三室\", value: \"ROOM|20903ae0-c7bc-f2e2\"},\r\n    {label: \"四室\", value: \"ROOM|ce2a5daa-811d-2f49\"},\r\n    {label: \"四室+\", value: \"ROOM|2731c38c-5b19-ff7f\"}\r\n]; \r\nconst orientedData = [\r\n    {label: \"东\", value: \"ORIEN|141b98bf-1ad0-11e3\"},\r\n    {label: \"西\", value: \"ORIEN|103fb3aa-e8b4-de0e\"},\r\n    {label: \"南\", value: \"ORIEN|61e99445-e95e-7f37\"},\r\n    {label: \"北\", value: \"ORIEN|caa6f80b-b764-c2df\"},\r\n    {label: \"东南\", value: \"ORIEN|dfb1b36b-e0d1-0977\"},\r\n    {label: \"东北\", value: \"ORIEN|67ac2205-7e0f-c057\"},\r\n    {label: \"西南\", value: \"ORIEN|2354e89e-3918-9cef\"},\r\n    {label: \"西北\", value: \"ORIEN|80795f1a-e32f-feb9\"}\r\n];\r\n\r\nconst alert = Modal.alert;\r\nexport default class RentAdd extends Component {\r\n    constructor (props) {\r\n        super(props)\r\n\r\n        const { state } = props.location;\r\n        let community = {\r\n            name: '',\r\n            id: ''\r\n        }\r\n\r\n        if (state) {\r\n            community.name = state.name;\r\n            community.id = state.id;\r\n        }\r\n\r\n        this.state = {\r\n            // 临时图片地址\r\n            tempSlides: [],\r\n            // 小区名称和id\r\n            community,\r\n            title: '',\r\n            tags: [],\r\n            price: '',\r\n            // 房型\r\n            roomType: '',\r\n            // 房屋面积\r\n            size: '',\r\n            // 朝向\r\n            oriented: [],\r\n            floor: '',\r\n            supporting: '',\r\n            description: ''\r\n        }\r\n\r\n    }\r\n\r\n    onCancel = () => {\r\n        alert('提示', '确定退出吗？', [\r\n            { text: '取消'},\r\n            { text: '确定', onPress: () => this.props.history.goBack() }\r\n        ])\r\n    } \r\n\r\n    onSubmit = () => {\r\n        alert('提示', '确定发布吗？', [\r\n            { text: '取消'},\r\n            { text: '确定', onPress: async () => {\r\n\r\n                Toast.loading('请稍等', 0, null, false)\r\n                const { tempSlides, community, supporting, title, price, roomType, size,  oriented, floor, description } = this.state;\r\n\r\n                // 处理图片数据\r\n                let houseImg = '';\r\n                if (tempSlides.length > 0) {\r\n                    const form = new FormData();\r\n                    tempSlides.forEach( item => form.append('file', item.file));\r\n\r\n                    const res = await API.post('/houses/image', form, {\r\n                        headers: {\r\n                            'content-type': 'multipart/form-data'\r\n                        }\r\n                    });\r\n                    houseImg = res.data.body.join('|');\r\n                }\r\n                Toast.hide();\r\n                // 调用接口，发布房源\r\n                const res = await API.post('/user/houses', {\r\n                    title,\r\n                    description,\r\n                    oriented,\r\n                    supporting,\r\n                    houseImg, \r\n                    community: community.id, \r\n                    price,\r\n                    roomType, \r\n                    size, \r\n                    floor\r\n                });\r\n                \r\n                if (res.data.status === 200) {\r\n                    Toast.info('发布成功！', 2, null, false);\r\n                    this.props.history.push('/rent')\r\n                } else {\r\n                    Toast.info('服务器开小差了，请稍后再试', 2, null, false)\r\n                }\r\n            }}\r\n        ])\r\n    }\r\n\r\n    // 获取表单数据\r\n    getValue = (name, value) => {\r\n        this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    // 获取图片数据\r\n    handleHouseImg = (files) => {\r\n        this.setState({\r\n            tempSlides: files\r\n        })\r\n    }\r\n\r\n    // 获取房屋配置数据\r\n    handleSupporting = (selectedVlalues) => {\r\n        // console.log(selectedValues)\r\n        this.setState({\r\n            supporting: selectedVlalues.join('|')\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { \r\n            tempSlides,\r\n            community,\r\n            title,\r\n            price,\r\n            roomType,\r\n            size,\r\n            oriented,\r\n            floor,\r\n            description\r\n        } = this.state;\r\n        return (\r\n            <div className={styles.root}>\r\n                <MyNavBar onLeftClick={this.onCancel}>发布房源</MyNavBar>\r\n\r\n            <List renderHeader={() => '房屋信息'}>\r\n                <Item  \r\n                    arrow=\"horizontal\"  \r\n                    extra={community.name || '请输入小区名称'} \r\n                    onClick={() => this.props.history.push('/rent/search') } \r\n                >小区名称</Item>\r\n\r\n                <InputItem \r\n                    placeholder=\"请输入每月租金\" \r\n                    extra=\"￥/月\" \r\n                    type=\"number\"\r\n                    value={price} \r\n                    onChange={(val) => this.getValue('price', val)}\r\n                >\r\n                    每月租金\r\n                </InputItem>\r\n\r\n                <InputItem \r\n                    placeholder=\"请输入建筑面积\" \r\n                    extra=\"㎡\" \r\n                    type=\"number\"\r\n                    value={size}\r\n                    onChange={(val) => this.getValue('size', val)}\r\n                >\r\n                    建筑面积\r\n                </InputItem>\r\n\r\n                <Picker \r\n                    data={roomTypeData} \r\n                    value={[roomType]} \r\n                    cols={1} \r\n                    onChange={(val) => this.getValue('roomType', val[0])}\r\n                >\r\n                    <Item arrow=\"horizontal\">户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型</Item>\r\n                </Picker>\r\n\r\n                <Picker \r\n                    data={floorData} \r\n                    value={[floor]} \r\n                    cols={1} \r\n                    onChange={(val) => this.getValue('floor', val[0])}\r\n                >\r\n                    <Item arrow=\"horizontal\">所在楼层</Item>\r\n                </Picker>\r\n\r\n                <Picker \r\n                    data={orientedData} \r\n                    value={[oriented]} \r\n                    cols={1} \r\n                    onChange={(val) => this.getValue('oriented', val[0])}\r\n                >\r\n                    <Item arrow=\"horizontal\">朝&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向</Item>\r\n                </Picker>\r\n            </List>\r\n\r\n            <List renderHeader={() => '房屋标题'}>\r\n                <InputItem \r\n                    placeholder=\"请输入房屋标题（例如：合租 小区名 3室 2000元）\" \r\n                    value={title} \r\n                    onChange={(val) => this.getValue('title', val)}\r\n                ></InputItem>\r\n            </List>\r\n\r\n            <List renderHeader={() => '房屋图像'}>\r\n                <ImagePicker \r\n                    files={tempSlides}\r\n                    multiple={true}\r\n                    onChange={this.handleHouseImg}\r\n                    className={styles.imagePicker}\r\n                />\r\n            </List>\r\n\r\n            <List renderHeader={() => '房屋配置'} className={styles.supporting}>\r\n                <HousePackage select={true} onSelect={this.handleSupporting} />\r\n            </List>\r\n\r\n            <List renderHeader={() => '房屋描述'}>\r\n                <TextareaItem\r\n                    rows={5}\r\n                    placeholder=\"请输入房屋描述信息\"\r\n                    value={description} \r\n                    onChange={(val) => this.getValue('description', val)}\r\n                />\r\n            </List>\r\n\r\n            <FilterFooter \r\n                className={styles.buttons}\r\n                cancelText=\"取消\"\r\n                okText=\"提交\"\r\n                onCancel={this.onCancel}\r\n                onOk={this.onSubmit}\r\n            />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}