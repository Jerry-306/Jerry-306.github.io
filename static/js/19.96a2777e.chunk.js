(this.webpackJsonpzufang=this.webpackJsonpzufang||[]).push([[19],{210:function(t,e,n){"use strict";n(212);var r=n(213),i=n.n(r),a=n(16),c=n(17),s=n(18),o=n(19),l=n(0),u=n(7),f=n(211),d=n.n(f),h=n(1),p=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).defaultClick=function(){return t.props.history.goBack()},t}return Object(c.a)(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.className,r=t.rightContent,a=t.onLeftClick;return Object(h.jsx)("div",{children:Object(h.jsx)(i.a,{className:[d.a.navbar,n||""].join(" "),mode:"light",icon:Object(h.jsx)("i",{className:"iconfont icon-back"}),onLeftClick:a||this.defaultClick,rightContent:r,children:e})})}}]),n}(l.Component);e.a=Object(u.g)(p)},211:function(t,e,n){t.exports={navbar:"MyNavBar_navbar__39ut8"}},212:function(t,e,n){"use strict";n(24),n(214)},213:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(2)),i=u(n(3)),a=u(n(6)),c=u(n(4)),s=u(n(5)),o=u(n(20)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var f=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},d=function(t){function e(){return(0,i.default)(this,e),(0,c.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,a.default)(e,[{key:"render",value:function(){var t=this.props,e=t.prefixCls,n=t.className,i=t.children,a=t.mode,c=t.icon,s=t.onLeftClick,u=t.leftContent,d=t.rightContent,h=f(t,["prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent"]);return l.createElement("div",(0,r.default)({},h,{className:(0,o.default)(n,e,e+"-"+a)}),l.createElement("div",{className:e+"-left",role:"button",onClick:s},c?l.createElement("span",{className:e+"-left-icon","aria-hidden":"true"},c):null,u),l.createElement("div",{className:e+"-title"},i),l.createElement("div",{className:e+"-right"},d))}}]),e}(l.Component);e.default=d,d.defaultProps={prefixCls:"am-navbar",mode:"dark",onLeftClick:function(){}},t.exports=e.default},214:function(t,e,n){},338:function(t,e,n){},507:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return x}));var r=n(12),i=n.n(r),a=n(25),c=n(16),s=n(17),o=n(18),l=n(19),u=n(0),f=n(46),d=n.n(f),h=n(323),p=n(210),y=n(79),v=(n(338),n(1));function b(t){var e,n={};return t.forEach((function(t){var e=t.short.substr(0,1);n[e]?n[e].push(t):n[e]=[t]})),e=Object.keys(n).sort(),{cityList:n,cityIndex:e}}function j(t){switch(t){case"#":return"\u5f53\u524d\u5b9a\u4f4d";case"hot":return"\u70ed\u95e8\u57ce\u5e02";default:return t.toUpperCase()}}var x=function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={cityList:{},cityIndex:[],activeIndex:0},t.rowRenderer=function(e){var n=e.key,r=e.index,i=(e.isScrolling,e.isVisible,e.style),a=t.state,c=a.cityIndex,s=a.cityList,o=c[r];return Object(v.jsxs)("div",{style:i,className:"city",children:[Object(v.jsx)("div",{className:"title",children:j(o)}),s[o].map((function(e){return Object(v.jsx)("div",{className:"name",onClick:function(){return t.changeCity(e)},children:e.label},e.value)}))]},n)},t.rowsRendered=function(e){var n=e.startIndex;n!==t.state.activeIndex&&t.setState({activeIndex:n})},t.getRowHeight=function(e){var n=e.index,r=t.state;return 36+50*r.cityList[r.cityIndex[n]].length},t}return Object(s.a)(n,[{key:"getCityList",value:function(){var t=Object(a.a)(i.a.mark((function t(){var e,n,r,a,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("http://localhost:8009/area/city?level=1");case 2:return e=t.sent,n=b(e.data.body),r=n.cityList,a=n.cityIndex,t.next=6,d.a.get("http://localhost:8009/area/hot");case 6:return c=t.sent,r.hot=c.data.body,a.unshift("hot"),t.next=11,Object(y.a)();case 11:s=t.sent,r["#"]=[s],a.unshift("#"),this.setState({cityList:r,cityIndex:a});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"renderCityIndex",value:function(){var t=this,e=this.state,n=e.cityIndex,r=e.activeIndex;return n.map((function(e,n){return Object(v.jsx)("li",{className:"city-index-item",onClick:function(){t.cityListComponent.scrollToRow(n)},children:Object(v.jsx)("span",{className:r===n?"index-active":"",children:"hot"===e?"\u70ed":e.toUpperCase()})},e)}))}},{key:"changeCity",value:function(t){var e=t.label,n=t.value;localStorage.setItem("zfy_city",JSON.stringify({label:e,value:n})),this.props.history.goBack()}},{key:"componentDidMount",value:function(){var t=Object(a.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCityList();case 2:this.cityListComponent.measureAllRows();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(v.jsxs)("div",{className:"citylist",children:[Object(v.jsx)(p.a,{children:"\u57ce\u5e02\u9009\u62e9"}),Object(v.jsx)(h.a,{children:function(e){var n=e.width,r=e.height;return Object(v.jsx)(h.c,{ref:function(e){return t.cityListComponent=e},width:n,height:r,rowCount:t.state.cityIndex.length,rowHeight:t.getRowHeight,rowRenderer:t.rowRenderer,onRowsRendered:t.rowsRendered,scrollToAlignment:"start"})}}),Object(v.jsx)("ul",{className:"city-index",children:this.renderCityIndex()})]})}}]),n}(u.Component)}}]);
//# sourceMappingURL=19.96a2777e.chunk.js.map