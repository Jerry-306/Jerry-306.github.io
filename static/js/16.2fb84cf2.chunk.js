(this.webpackJsonpzufang=this.webpackJsonpzufang||[]).push([[16],{212:function(e,t,a){"use strict";a(214);var n=a(215),s=a.n(n),r=a(16),c=a(17),i=a(18),o=a(19),l=a(0),u=a(7),p=a(213),d=a.n(p),h=a(1),f=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).defaultClick=function(){return e.props.history.goBack()},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.className,n=e.rightContent,r=e.onLeftClick;return Object(h.jsx)("div",{children:Object(h.jsx)(s.a,{className:[d.a.navbar,a||""].join(" "),mode:"light",icon:Object(h.jsx)("i",{className:"iconfont icon-back"}),onLeftClick:r||this.defaultClick,rightContent:n,children:t})})}}]),a}(l.Component);t.a=Object(u.g)(f)},213:function(e,t,a){e.exports={navbar:"MyNavBar_navbar__1MYpP"}},214:function(e,t,a){"use strict";a(24),a(216)},215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(2)),s=u(a(3)),r=u(a(6)),c=u(a(4)),i=u(a(5)),o=u(a(20)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));function u(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(a[n[s]]=e[n[s]])}return a},d=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.className,s=e.children,r=e.mode,c=e.icon,i=e.onLeftClick,u=e.leftContent,d=e.rightContent,h=p(e,["prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent"]);return l.createElement("div",(0,n.default)({},h,{className:(0,o.default)(a,t,t+"-"+r)}),l.createElement("div",{className:t+"-left",role:"button",onClick:i},c?l.createElement("span",{className:t+"-left-icon","aria-hidden":"true"},c):null,u),l.createElement("div",{className:t+"-title"},s),l.createElement("div",{className:t+"-right"},d))}}]),t}(l.Component);t.default=d,d.defaultProps={prefixCls:"am-navbar",mode:"dark",onLeftClick:function(){}},e.exports=t.default},216:function(e,t,a){},233:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(16),s=a(17),r=a(18),c=a(19),i=a(0),o=a(234),l=a.n(o),u=a(1),p=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.title,n=e.desc,s=e.tags,r=e.price,c=e.style,i=e.onClick;return Object(u.jsxs)("div",{className:l.a.house,style:c,onClick:i,children:[Object(u.jsx)("div",{className:l.a.imgWrap,children:Object(u.jsx)("img",{className:l.a.img,src:t,alt:""})}),Object(u.jsxs)("div",{className:l.a.content,children:[Object(u.jsx)("h3",{className:l.a.title,children:a}),Object(u.jsx)("div",{className:l.a.desc,children:n}),Object(u.jsx)("div",{children:s.map((function(e,t){var a="tag"+(t%4+1);return Object(u.jsx)("span",{className:[l.a.tag,l.a[a]].join(" "),children:e},e)}))}),Object(u.jsxs)("div",{className:l.a.price,children:[Object(u.jsx)("span",{className:l.a.priceNum,children:r})," \u5143/\u6708"]})]})]})}}]),a}(i.Component)},234:function(e,t,a){e.exports={house:"HouseItem_house__3Avqi",imgWrap:"HouseItem_imgWrap__ocbSI",img:"HouseItem_img__T4LVu",content:"HouseItem_content__1Uucg",title:"HouseItem_title__ZGRaa",desc:"HouseItem_desc__126ya",price:"HouseItem_price__nJXZ4",priceNum:"HouseItem_priceNum__3ms0A",tag:"HouseItem_tag__atV98",tag1:"HouseItem_tag1__6i_w3",tag2:"HouseItem_tag2__32HGp",tag3:"HouseItem_tag3__1MKZo",tag4:"HouseItem_tag4__25svf"}},346:function(e,t,a){e.exports={map:"Map_map__3YDuX",container:"Map_container__1G_td",bubble:"Map_bubble__1J3BN",name:"Map_name__23_rj",rect:"Map_rect__1hGTe",arrow:"Map_arrow__2-KCD",housename:"Map_housename__2sSwi",housenum:"Map_housenum__3b9Pm",houseList:"Map_houseList__21auu",show:"Map_show__2tfH2",titleWrap:"Map_titleWrap__2E3zC",listTitle:"Map_listTitle__1uU2x",titleMore:"Map_titleMore___NMGH",houseItems:"Map_houseItems__3BXBC"}},510:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));a(224);var n=a(225),s=a.n(n),r=a(25),c=a(16),i=a(17),o=a(18),l=a(19),u=a(13),p=a.n(u),d=a(0),h=a(39),f=a(36),m=a(21),_=a(212),v=a(233),b=a(346),j=a.n(b),O=a(1),g={cursor:"pointer",border:"0px solid rgb(255, 0, 0)",padding:"0px",whiteSpace:"nowrap",fontSize:"10px",color:"rgb(255, 255, 255)",textAlign:"center"},y=window.BMapGL,x=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={housesList:[],isShowList:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setMap()}},{key:"setMap",value:function(){var e=this,t=new y.Map("container"),a=JSON.parse(localStorage.getItem("zfy_city")),n=a.label,c=a.value;this.map=t,(new y.Geocoder).getPoint(n,function(){var a=Object(r.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n?(t.centerAndZoom(n,12),t.enableScrollWheelZoom(!0),t.setTilt(20),t.addControl(new y.ScaleControl),t.addControl(new y.ZoomControl),t.addControl(new y.LocationControl),e.renderOverlays(c)):s.a.info("\u60a8\u9009\u62e9\u7684\u5730\u5740\u6ca1\u6709\u89e3\u6790\u5230\u7ed3\u679c!",1,null,!1);case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),n),t.addEventListener("movestart",(function(){e.state.isShowList&&e.setState({isShowList:!1})}))}},{key:"renderOverlays",value:function(){var e=Object(r.a)(p.a.mark((function e(t){var a,n,r,c,i,o=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.a.loading("Loading...",0,null,!1),e.next=4,h.a.get("/area/map?id=".concat(t));case 4:a=e.sent,s.a.hide(),n=a.data.body,r=this.getTypeAndZoom(),c=r.nextZoom,i=r.type,n.forEach((function(e){o.createOverlays(e,c,i)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),s.a.hide();case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTypeAndZoom",value:function(){var e,t,a=this.map.getZoom();return a>=11&&a<13?(e=14,t="circle"):a>=13&&a<15?(e=16,t="circle"):a>=15&&a<17&&(t="rect"),{nextZoom:e,type:t}}},{key:"createOverlays",value:function(e,t,a){var n=e.coord,s=n.longitude,r=n.latitude,c=e.label,i=e.count,o=e.value,l=new y.Point(s,r);"circle"===a?this.createCircle(l,c,i,o,t):this.createRect(l,c,i,o)}},{key:"createCircle",value:function(e,t,a,n,s){var r=this,c=new y.Label("",{position:e,offset:new y.Size(-25,-25)});c.setContent('\n            <div class="'.concat(j.a.bubble,'">\n                <p class="').concat(j.a.name,'">').concat(t,"</p>\n                <p>").concat(a,"\u5957</p>\n            </div>\n        ")),c.setStyle(g),c.addEventListener("click",(function(){r.renderOverlays(n),r.map.centerAndZoom(e,s),setTimeout((function(){r.map.clearOverlays()}),0)})),this.map.addOverlay(c)}},{key:"createRect",value:function(e,t,a,n){var s=this,r=new y.Label("",{position:e,offset:new y.Size(-50,-28)});r.setContent('\n            <div class="'.concat(j.a.rect,'">\n                <span class="').concat(j.a.housename,'">').concat(t,'</span>\n                <span class="').concat(j.a.housenum,'">').concat(a,'\u5957</span>\n                <i class="').concat(j.a.arrow,'"></i>\n            </div>\n        ')),r.setStyle(g),r.addEventListener("click",(function(e){s.getHousesList(n)})),this.map.addOverlay(r)}},{key:"getHousesList",value:function(){var e=Object(r.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.a.loading("Loading...",0,null,!1),e.next=4,h.a.get("/houses?cityId=".concat(t));case 4:a=e.sent,s.a.hide(),this.setState({housesList:a.data.body.list,isShowList:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s.a.hide();case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderHousesList",value:function(){var e=this;return this.state.housesList.map((function(t){return Object(O.jsx)(v.a,{src:m.a+t.houseImg,onClick:function(){return e.props.history.push("/detail/".concat(t.houseCode))},title:t.title,desc:t.desc,tags:t.tags,price:t.price},t.houseCode)}))}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:j.a.map,children:[Object(O.jsx)(_.a,{children:"\u5730\u56fe\u627e\u623f"}),Object(O.jsx)("div",{id:"container",className:j.a.container}),Object(O.jsxs)("div",{className:[j.a.houseList,this.state.isShowList?j.a.show:""].join(" "),children:[Object(O.jsxs)("div",{className:j.a.titleWrap,children:[Object(O.jsx)("h1",{className:j.a.listTitle,children:"\u623f\u5c4b\u5217\u8868"}),Object(O.jsx)(f.b,{className:j.a.titleMore,to:"/home/list",children:"\u66f4\u591a\u623f\u6e90"})]}),Object(O.jsx)("div",{className:j.a.houseItems,children:this.renderHousesList()})]})]})}}]),a}(d.Component)}}]);
//# sourceMappingURL=16.2fb84cf2.chunk.js.map