{"version":3,"sources":["components/NoHouse/index.js","components/NoHouse/index.module.css","components/HouseItem/index.js","components/HouseItem/index.module.css","components/FilterFooter/index.js","components/FilterFooter/index.module.css","pages/HouseList/components/FilterMore/index.module.css","pages/HouseList/components/FilterTitle/index.module.css","pages/HouseList/components/Filter/index.module.css","components/Sticky/index.module.css","pages/HouseList/index.module.css","pages/HouseList/components/FilterMore/index.js","pages/HouseList/components/FilterPicker/index.js","pages/HouseList/components/FilterTitle/index.js","pages/HouseList/components/Filter/index.js","components/Sticky/index.js","pages/HouseList/index.js"],"names":["NoHouse","className","styles","root","img","src","BASE_URL","alt","msg","this","props","children","Component","module","exports","HouseItem","title","desc","tags","price","style","onClick","house","imgWrap","content","map","tag","index","tagClass","join","priceNum","FilterFooter","cancelText","okText","onCancel","onOk","btn","cancel","ok","FilterMore","state","selectedValues","defaultValues","setState","type","onSave","value","array","includes","indexOf","splice","push","data","item","isSelected","tagActive","onTagClick","label","characteristic","floor","oriented","roomType","name","child","renderFilters","buttons","FilterPicker","ddefaultValue","cols","onChange","titleList","FilterTitle","titleSelectedStatus","align","Item","dropdown","selected","area","mode","more","Filter","openType","filtersData","htmlBody","newTitleSelectedStatus","selectedVal","length","newSelectedValues","filters","areaKey","areaValue","onFilter","onTitleClick","Object","keys","forEach","key","getFiltersData","document","body","a","JSON","parse","localStorage","getItem","API","get","res","subway","rentType","from","opacity","to","div","mask","renderMask","renderFilterPicker","renderFilterMore","Sticky","handleScroll","placeholderDOM","placeholder","contentDOM","height","getBoundingClientRect","top","classList","add","fixed","remove","window","addEventListener","removeEventListener","ref","c","HouseList","labei","list","count","isLoading","searchHouseList","scrollTo","renderHouseList","history","houseCode","houseImg","loading","isRowLoaded","loadMoreRows","startIndex","stopIndex","Promise","resolve","params","cityId","start","end","then","hide","info","rowCount","onRowsRendered","registerChild","isScrolling","scrollTop","width","autoHeight","rowHeight","rowRenderer","getCurrentCity","header","goBack","SearchHeader","currentCity","searchHeader","houseItems","renderHouseItem"],"mappings":"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","file":"static/js/11.8eadf908.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {BASE_URL} from '../../utils/url'\r\nimport styles from './index.module.css'\r\n\r\nexport default class NoHouse extends Component {\r\n    static propTypes = {\r\n        children: PropTypes.node.isRequired\r\n    }\r\n    render() {\r\n        return (\r\n            <div className={styles.root}>\r\n                <img\r\n                    className={styles.img}\r\n                    src={BASE_URL + '/img/not-found.png'}\r\n                    alt=\"暂无数据\"\r\n                />\r\n                <p className={styles.msg}>{this.props.children}</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NoHouse_root__i6-wd\",\"img\":\"NoHouse_img__2Q8aI\",\"msg\":\"NoHouse_msg__1sPmC\"};","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './index.module.css'\r\n\r\nexport default class HouseItem extends Component {\r\n    static propTypes = {\r\n        src: PropTypes.string,\r\n        title: PropTypes.string,\r\n        desc: PropTypes.string,\r\n        tags: PropTypes.array.isRequired,\r\n        price: PropTypes.number,\r\n        onClick: PropTypes.func\r\n    }\r\n\r\n    render() {\r\n        const {src, title, desc, tags, price, style, onClick} = this.props;\r\n        return (\r\n            <div className={styles.house} style={style} onClick={onClick} >\r\n                <div className={styles.imgWrap}>\r\n                <img\r\n                    className={styles.img}\r\n                    src={src}\r\n                    alt=\"\"\r\n                />\r\n                </div>\r\n                <div className={styles.content}>\r\n                    <h3 className={styles.title}>{title}</h3>\r\n                    <div className={styles.desc}>{desc}</div>\r\n                    <div>\r\n                        {/* ['近地铁', '随时看房'] */}\r\n                        {tags.map((tag, index) => {\r\n                            const tagClass = 'tag' + (index % 4 + 1)\r\n                            return (\r\n                                <span\r\n                                    className={[styles.tag, styles[tagClass]].join(' ')}\r\n                                    key={tag}\r\n                                >\r\n                                    {tag}\r\n                                </span>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                    <div className={styles.price}>\r\n                        <span className={styles.priceNum}>{price}</span> 元/月\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__pM8tl\",\"imgWrap\":\"HouseItem_imgWrap__hoEAd\",\"img\":\"HouseItem_img__3_ylS\",\"content\":\"HouseItem_content__3Jepc\",\"title\":\"HouseItem_title__1qDLk\",\"desc\":\"HouseItem_desc__cFgfb\",\"price\":\"HouseItem_price__2dMsn\",\"priceNum\":\"HouseItem_priceNum__2_pSx\",\"tag\":\"HouseItem_tag__1B6dy\",\"tag1\":\"HouseItem_tag1__6j9X6\",\"tag2\":\"HouseItem_tag2__2r-QT\",\"tag3\":\"HouseItem_tag3__2-HIr\",\"tag4\":\"HouseItem_tag4__1oNd_\"};","import React, { Component } from 'react'\r\nimport {Flex} from 'antd-mobile'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './index.module.css'\r\n\r\n\r\nexport default class FilterFooter extends Component {\r\n\r\n    static propTypes = {\r\n        cancelText: PropTypes.string,\r\n        okText: PropTypes.string,\r\n        onCancel: PropTypes.func.isRequired,\r\n        onOk: PropTypes.func.isRequired,\r\n        className: PropTypes.string\r\n    }\r\n    \r\n    render() {\r\n        const {cancelText, okText, onCancel, onOk, className} = this.props;\r\n        return (\r\n            <Flex className={[styles.root, className ||''].join(' ')}>\r\n                {/* 取消按钮 */}\r\n                <span className={[styles.btn, styles.cancel].join(' ')} onClick={onCancel}>\r\n                    {cancelText ? cancelText : '取消'}\r\n                </span>\r\n\r\n                {/* 确定按钮 */}\r\n                <span className={[styles.btn, styles.ok].join(' ')} onClick={onOk}>\r\n                    {okText ? okText : '确定'}\r\n                </span>\r\n            </Flex>\r\n        )\r\n    }\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterFooter_root__Yumkx\",\"btn\":\"FilterFooter_btn__RbP6d\",\"cancel\":\"FilterFooter_cancel__2PizR\",\"ok\":\"FilterFooter_ok__3igOM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterMore_root__CkOIH\",\"tags\":\"FilterMore_tags__2bxh9\",\"name\":\"FilterMore_name__3VDT2\",\"child\":\"FilterMore_child__1FgGe\",\"tag\":\"FilterMore_tag__1BCaq\",\"tagActive\":\"FilterMore_tagActive__F76lf\",\"buttons\":\"FilterMore_buttons__2m5QW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"FilterTitle_root__dGxjN\",\"dropdown\":\"FilterTitle_dropdown__22N-j\",\"selected\":\"FilterTitle_selected__2fm71\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Filter_root__1ZNE_\",\"mask\":\"Filter_mask__uDYME\",\"content\":\"Filter_content__8UncL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fixed\":\"Sticky_fixed__OrD01\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"HouseList_header__2I1Mp\",\"searchHeader\":\"HouseList_searchHeader__XHH-5\",\"houseItems\":\"HouseList_houseItems__ndrNX\",\"loading\":\"HouseList_loading__3ie2J\"};","import React, { Component } from 'react'\r\n\r\nimport FilterFooter from '../../../../components/FilterFooter'\r\n\r\nimport styles from './index.module.css'\r\n\r\nexport default class FilterMore extends Component {\r\n\r\n    state = {\r\n        // tag 的选中值\r\n        selectedValues: this.props.defaultValues\r\n    }\r\n\r\n    onTagClick (value) {\r\n        const { selectedValues } = this.state;\r\n        let array = [...selectedValues];\r\n\r\n        // 如果选中值中已经有当前值，说明用户此时再次点击该标签，那么就取消当前标签高亮效果\r\n        if (selectedValues.includes(value)) {\r\n            const index = array.indexOf(value);\r\n            // 删除该标签\r\n            array.splice(index, 1);\r\n        } else {\r\n            array.push(value);\r\n        }\r\n\r\n        this.setState({\r\n            selectedValues: array\r\n        })\r\n    }\r\n\r\n    // 清空选项\r\n    onCancel = () => {\r\n        this.setState({\r\n            selectedValues: []\r\n        })\r\n    }\r\n\r\n    // 确认按钮事件\r\n    onOk = () => {\r\n        const {type, onSave} = this.props;\r\n        onSave(type, this.state.selectedValues);\r\n    }\r\n\r\n    // 渲染标签\r\n    renderFilters (data) {\r\n        // 高亮类名： styles.tagActive\r\n        return data.map( item => {\r\n            const { selectedValues } = this.state;\r\n            // 判断选中数组中是否有当前标签值\r\n            const isSelected = selectedValues.includes(item.value);\r\n            return (\r\n                <div \r\n                    key={item.value} \r\n                    className={[styles.tag, isSelected ? styles.tagActive : '' ].join(' ')}\r\n                    onClick={ () => this.onTagClick(item.value) }\r\n                >\r\n                    {item.label}\r\n                </div>\r\n            )\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            data: {\r\n                characteristic, floor, oriented, roomType\r\n            }\r\n        } = this.props\r\n        return (\r\n            <div className={styles.root}>\r\n                {/* 条件内容 */}\r\n                <div className={styles.tags}>\r\n                    <div className={styles.name}>户型</div>\r\n                    <div className={styles.child}>{this.renderFilters(roomType)}</div>\r\n\r\n                    <div className={styles.name}>楼层</div>\r\n                    <div className={styles.child}>{this.renderFilters(floor)}</div>\r\n\r\n                    <div className={styles.name}>朝向</div>\r\n                    <div className={styles.child}>{this.renderFilters(oriented)}</div>\r\n\r\n                    <div className={styles.name}>特色</div>\r\n                    <div className={styles.child}>{this.renderFilters(characteristic)}</div>\r\n                </div>\r\n                <FilterFooter className={styles.buttons} cancelText='清除' onCancel={this.onCancel} onOk={this.onOk} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport {PickerView} from 'antd-mobile'\r\n\r\nimport FilterFooter from '../../../../components/FilterFooter'\r\n\r\nexport default class FilterPicker extends Component {\r\n    state = {\r\n        value: this.props.ddefaultValue\r\n    }\r\n    render() {\r\n        const {onCancel, onSave, data, cols, type} = this.props\r\n        return (\r\n            <>\r\n                <PickerView data={data} value={this.state.value} cols={cols}\r\n                onChange={ value => this.setState({value})}/>\r\n                <FilterFooter onCancel={() => onCancel(type)} onOk={() => onSave(type, this.state.value)} />\r\n            </>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport {Flex} from 'antd-mobile'\r\n\r\nimport styles from './index.module.css'\r\n\r\n\r\nconst titleList = [\r\n    {title: '区域', type: 'area'},\r\n    {title: '方式', type: 'mode'},\r\n    {title: '价格', type: 'price'},\r\n    {title: '筛选', type: 'more'}\r\n]\r\n\r\nexport default class FilterTitle extends Component {\r\n    state = {\r\n        titleList\r\n    }\r\n    render() {\r\n        const {titleSelectedStatus, onClick} = this.props;\r\n        return (\r\n            <Flex align=\"center\" className={styles.root}>\r\n                {\r\n                    this.state.titleList.map( item => {\r\n                        const isSelected = titleSelectedStatus[item.type]\r\n                        return (\r\n                            <Flex.Item key={item.type} onClick={ () => onClick(item.type) } >\r\n                                <span className={[styles.dropdown, isSelected ? styles.selected : ''].join(' ')}>\r\n                                    <span>{item.title}</span>\r\n                                    <i className=\"iconfont icon-arrow\" />\r\n                                </span>\r\n                            </Flex.Item>\r\n                        )\r\n                    })\r\n                }\r\n\r\n            </Flex>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\n// 导入Spring 组件\r\nimport { Spring, animated } from 'react-spring'\r\n\r\nimport FilterMore from '../FilterMore'\r\nimport FilterPicker from '../FilterPicker'\r\nimport FilterTitle from '../FilterTitle'\r\n\r\nimport API from '../../../../utils/api'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 标题栏数组\r\nconst titleSelectedStatus = {\r\n    area: false,\r\n    mode: false,\r\n    price: false,\r\n    more: false\r\n}\r\n\r\n// FilterOicker 默认选中值\r\nconst selectedValues = {\r\n    area: ['area', 'null'],\r\n    mode: ['null'],\r\n    price: ['null'],\r\n    more: []\r\n}\r\n\r\nexport default class Filter extends Component {\r\n\r\n    state = {\r\n        titleSelectedStatus,\r\n        // 控制 FilterPicker  FilterMore 组件的展示或隐藏\r\n        openType: '',\r\n        // 筛选数据\r\n        filtersData: {},\r\n        // 选中值\r\n        selectedValues\r\n\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.getFiltersData();\r\n        this.htmlBody = document.body;\r\n    }\r\n\r\n    async getFiltersData () {\r\n        // 获取当前定位城市id\r\n        const {value} = JSON.parse(localStorage.getItem('zfy_city'));\r\n        const res = await API.get(`/houses/condition?id=${value}`);\r\n        this.setState({\r\n            filtersData: res.data.body\r\n        })\r\n\r\n    }\r\n\r\n    // 取消（隐藏）对话框\r\n    onCancel = (type) => {\r\n        this.htmlBody.className = '';\r\n        const {selectedValues, titleSelectedStatus} = this.state;\r\n        let newTitleSelectedStatus = {...titleSelectedStatus};\r\n\r\n        const selectedVal = selectedValues[type];\r\n        if ( type === 'area' && (selectedVal.length !==2 || selectedVal[0] !== 'area') ) {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else if ( type === 'mode' && selectedVal[0] !== 'null') {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else if (type === 'price' && selectedVal[0] !== 'null') {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else if ( type === 'more' && selectedVal.length !== 0 ) {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else {\r\n            newTitleSelectedStatus[type] = false;\r\n        }\r\n\r\n        this.setState({\r\n            openType: '',\r\n            titleSelectedStatus: newTitleSelectedStatus\r\n        })\r\n    }\r\n    \r\n    // 确定\r\n    onSave = (type, value) => {\r\n        this.htmlBody.className = '';\r\n        // 判断标题选中状态\r\n        const { titleSelectedStatus } = this.state;\r\n        let newTitleSelectedStatus = {...titleSelectedStatus};\r\n\r\n        const selectedVal = value;\r\n\r\n        if ( type === 'area' && (selectedVal.length !==2 || selectedVal[0] !== 'area') ) {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else if ( type === 'mode' && selectedVal[0] !== 'null') {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else if (type === 'price' && selectedVal[0] !== 'null') {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else if ( type === 'more' && selectedVal.length !== 0 ) {\r\n            newTitleSelectedStatus[type] = true;\r\n        } else {\r\n            newTitleSelectedStatus[type] = false;\r\n        }\r\n\r\n        // 重构筛选值\r\n        const newSelectedValues = {\r\n            // ES6 语法 this.state.selectedValues[type] 的属性值会覆盖之前 [type] 对应的属性值\r\n            ...this.state.selectedValues,\r\n            [type]: value\r\n        };\r\n        // console.log(newSelectedValues);\r\n        /*\r\n        area: (3) [\"area\", \"AREA|a804fe00-df6a-6265\", \"AREA|4666b0ac-73ad-97ab\"]\r\n        mode: [\"false\"]\r\n        more: (5) [\"ROOM|d1a00384-5801-d5cd\", \"ROOM|20903ae0-c7bc-f2e2\", \"FLOOR|3\", \"FLOOR|2\", \"ORIEN|103fb3aa-e8b4-de0e\"]\r\n        price: [\"PRICE|2000\"]\r\n        [[Prototype]]: Object\r\n        */\r\n\r\n        // 筛选条件数据\r\n        const filters = {};\r\n        const { area , mode, price, more} = newSelectedValues;\r\n\r\n        // 区域\r\n        const areaKey = area[0];\r\n        let areaValue = 'null';\r\n        if (area.length === 3) {\r\n            areaValue = area[2] !== 'null' ? area[2] : area[1];\r\n        }\r\n        filters[areaKey] = areaValue;\r\n\r\n        // 方式、租金\r\n        filters.mode = mode[0];\r\n        filters.price = price[0];\r\n\r\n        // 特色\r\n        filters.more = more.join(',');\r\n\r\n        // 调用父组件的方法，把筛选数据传递给父组件\r\n        this.props.onFilter(filters);\r\n\r\n        // 更新状态\r\n        this.setState({\r\n            // 隐藏对话框\r\n            openType: '',\r\n            // 更新标题高亮数据\r\n            titleSelectedStatus: newTitleSelectedStatus,\r\n            selectedValues: newSelectedValues\r\n        })\r\n    }\r\n\r\n    // 改变标题颜色\r\n    onTitleClick = (type) => {\r\n        this.htmlBody.className = 'body-fixed';\r\n        const {selectedValues, titleSelectedStatus} = this.state;\r\n        let newTitleSelectedStatus = {...titleSelectedStatus};\r\n\r\n        // console.log(selectedValues);\r\n        // 根据 selectedValues 里状态判断 哪些标题被选中\r\n        Object.keys(titleSelectedStatus).forEach( key => {\r\n            if ( key === type ) {\r\n                // 当前选中状态\r\n                newTitleSelectedStatus[key] = true;\r\n                return;\r\n            }\r\n\r\n            // 其他标题\r\n            const selectedVal = selectedValues[key];\r\n            if ( key === 'area' && (selectedVal.length !==2 || selectedVal[0] !== 'area') ) {\r\n                newTitleSelectedStatus[key] = true;\r\n            } else if ( key === 'mode' && selectedVal[0] !== 'null') {\r\n                newTitleSelectedStatus[key] = true;\r\n            } else if (key === 'price' && selectedVal[0] !== 'null') {\r\n                newTitleSelectedStatus[key] = true;\r\n            } else if ( key === 'more' && selectedVal.length !== 0 ) {\r\n                newTitleSelectedStatus[key] = true;\r\n            } else {\r\n                newTitleSelectedStatus[key] = false;\r\n            }\r\n        })\r\n        this.setState({\r\n            openType: type,\r\n            titleSelectedStatus: newTitleSelectedStatus\r\n        })\r\n    }\r\n\r\n    // 渲染 FilterPicker 组件方法\r\n    renderFilterPicker () {\r\n        const {openType, \r\n              filtersData: {area, subway, rentType, price}, \r\n              selectedValues } = this.state;\r\n\r\n        if (openType !== 'area' && openType !== 'mode' && openType !== 'price') {\r\n            return null\r\n        } else {\r\n            let data = [];\r\n            let cols = 1;\r\n            let ddefaultValue = selectedValues[openType];\r\n            switch (openType) {\r\n                case 'area':\r\n                    data = [area, subway];\r\n                    cols = 3;\r\n                    break;\r\n                case 'mode':\r\n                    data = rentType;\r\n                    break;\r\n                case 'price':\r\n                    data = price;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return <FilterPicker\r\n                        key={openType}\r\n                        data={data} \r\n                        cols={cols} \r\n                        type={openType}\r\n                        ddefaultValue={ddefaultValue} \r\n                        onCancel={this.onCancel} \r\n                        onSave={this.onSave} \r\n                    />\r\n        }\r\n    }\r\n\r\n    // 渲染 FilterMore 组件方法\r\n    renderFilterMore () {\r\n        //  characteristic, floor, oriented, roomType\r\n        const { openType, \r\n                selectedValues,\r\n                filtersData: {\r\n                    characteristic, \r\n                    floor, \r\n                    oriented, \r\n                    roomType\r\n                }} = this.state;\r\n\r\n        const data = {characteristic, floor, oriented, roomType};\r\n        const defaultValues = selectedValues.more;\r\n        if ( openType === 'more' ) {\r\n            return <FilterMore \r\n                        data={data} \r\n                        defaultValues={defaultValues}\r\n                        type={openType} \r\n                        onSave={this.onSave}\r\n                        onCancel={this.onCancel}\r\n                    />\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n\r\n    // 渲染遮罩层\r\n    renderMask () {\r\n        const { openType } = this.state;\r\n        if (openType === '') {\r\n            return null\r\n        } else {\r\n            return (\r\n                <Spring from={{opacity: 0}} to={ {opacity: 1} } >\r\n                {\r\n                    props => {\r\n                        return <animated.div style={props} className={styles.mask} onClick={ () => this.onCancel(openType)} /> \r\n                    } \r\n                }\r\n            </Spring>\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {titleSelectedStatus} = this.state;\r\n        return (\r\n            <div className={styles.root}>\r\n                {/* 遮罩层组件 */}\r\n                {this.renderMask()}\r\n\r\n                {/* 内容组件 */}\r\n                <div className={styles.content}>\r\n                    {/* 标题栏 */}\r\n                    <FilterTitle \r\n                        titleSelectedStatus={titleSelectedStatus}\r\n                        onClick={this.onTitleClick} \r\n                    />\r\n\r\n                    {/* 前三个菜单对应内容 */}\r\n                    {this.renderFilterPicker()}\r\n\r\n                    {/* 最后一个菜单对应内容 */}\r\n                    {this.renderFilterMore()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport styles from './index.module.css'\r\n\r\nexport default class Sticky extends Component {\r\n    static propTypes = {\r\n        height: PropTypes.number.isRequired\r\n    }\r\n\r\n    handleScroll = () => {\r\n        const placeholderDOM = this.placeholder;\r\n        const contentDOM = this.content;\r\n        const { height } = this.props;\r\n\r\n        const { top } = placeholderDOM.getBoundingClientRect();\r\n        if (top < 0) {\r\n            //吸顶\r\n            contentDOM.classList.add(styles.fixed);\r\n            placeholderDOM.style.height = `${height}px`;\r\n        } else {\r\n            contentDOM.classList.remove(styles.fixed);\r\n            placeholderDOM.style.height = '0px'\r\n        }\r\n    }\r\n\r\n    // 监听 scroll 事件\r\n    componentDidMount () {\r\n        window.addEventListener('scroll', this.handleScroll)\r\n    }\r\n\r\n    componentWillUnmount () {\r\n        window.removeEventListener('scroll', this.handleScroll)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {/* 占位元素 */}\r\n                <div ref={ c => this.placeholder = c} />\r\n                {/* 内容元素 */}\r\n                <div ref={ c => this.content = c} >{ this.props.children }</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport {Flex, Toast} from 'antd-mobile'\r\nimport {List, AutoSizer, WindowScroller, InfiniteLoader} from 'react-virtualized'\r\n// 导入搜素导航栏\r\nimport SearchHeader from '../../components/SearchHeader'\r\n// 导入筛选栏组件\r\nimport Filter from './components/Filter'\r\n// 导入房屋列表组件\r\nimport HouseItem from '../../components/HouseItem'\r\n// 导入吸顶组件\r\nimport Sticky from '../../components/Sticky'\r\n// 导入没有房源提示组件\r\nimport NoHouse from '../../components/NoHouse'\r\nimport {getCurrentCity} from '.././../utils/index'\r\n\r\nimport API from '../../utils/api'\r\n\r\nimport { BASE_URL} from '../../utils/url'\r\n\r\n// 导入样式\r\nimport styles from './index.module.css'\r\n\r\nexport default class HouseList extends Component {\r\n    labei = '';\r\n    value = '';\r\n    state = {\r\n        list: [],   // 房源数据\r\n        count: 0,   // 房源数量\r\n        isLoading: false   // 房源数据是否正在加载\r\n    }\r\n\r\n    filters = {};\r\n\r\n    // 接收Filter 组件中房屋筛选条件数据\r\n    onFilter = (filters) => {\r\n        this.filters = filters;\r\n        this.searchHouseList();\r\n        // 点击确定按钮时， 页面回到顶部\r\n        window.scrollTo(0, 0);\r\n    }\r\n    \r\n    // 获取房屋列表数据\r\n    async searchHouseList () {\r\n        this.setState({\r\n            isLoading: true\r\n        })\r\n\r\n        Toast.loading('Loading...', 0, null, false);\r\n\r\n        const res = await API.get('/houses', {\r\n            params: {\r\n                cityId: this.value,\r\n                ...this.filters,\r\n                start: 1,\r\n                end:30\r\n            }\r\n        });\r\n\r\n        const {list, count} = res.data.body;\r\n        this.setState({\r\n            list,\r\n            count,\r\n            isLoading: false\r\n        });\r\n         \r\n        Toast.hide();\r\n        if (count !== 0) {\r\n            Toast.info(`共找到 ${count} 套房源`, 2, null, false);\r\n        } \r\n    } \r\n\r\n    // List组件渲染每一行的方法：\r\n    renderHouseList = ({\r\n        key, \r\n        index, \r\n        style //给每一个行数据添加该样式！作用：指定每一行的位置\r\n    }) => {\r\n        // 根据index获取每一行的数据\r\n        const { list } = this.state;\r\n        const house = list[index];\r\n         \r\n        if ( !house ) {\r\n            return (\r\n                <div key={key} style={style} className={styles.loading} >\r\n                    <p >Loading...</p>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <HouseItem \r\n                key={key}\r\n                onClick={() => this.props.history.push(`/detail/${house.houseCode}`)}\r\n                style={style}\r\n                src={BASE_URL + house.houseImg}\r\n                title={house.title}\r\n                desc={house.desc}\r\n                tags={house.tags}\r\n                price={house.price}\r\n            />\r\n        )\r\n    }\r\n\r\n    // 渲染列表项\r\n    renderHouseItem () {\r\n        const {count, isLoading} = this.state;\r\n        if (count === 0 && !isLoading) {\r\n            return <NoHouse>没有找到合适房源，换个条件试试吧 ~ ~</NoHouse>\r\n        }\r\n\r\n        return (\r\n            <InfiniteLoader\r\n                isRowLoaded={this.isRowLoaded}\r\n                loadMoreRows={this.loadMoreRows}\r\n                rowCount={ count }\r\n            >\r\n                { ({ onRowsRendered, registerChild }) => (\r\n                <WindowScroller>\r\n                    { ({height, isScrolling, scrollTop}) => (\r\n                        <AutoSizer>\r\n                            { ( {width} ) => (\r\n                                <List\r\n                                onRowsRendered={onRowsRendered}\r\n                                ref={registerChild}\r\n                                autoHeight\r\n                                width={width}  // 视口宽度\r\n                                height={height}  // 视口高度\r\n                                rowCount={ count } // 行数\r\n                                rowHeight={120}  // 行高\r\n                                rowRenderer={this.renderHouseList}  // 渲染每一行\r\n                                isScrolling={isScrolling}\r\n                                scrollTop={scrollTop}\r\n                                />\r\n                            )}\r\n                        </AutoSizer>\r\n                    ) }\r\n                </WindowScroller>\r\n                )}\r\n            </InfiniteLoader>\r\n        )\r\n    }\r\n\r\n    // 判断列表中每一行数据是否加载完成\r\n    isRowLoaded = ({ index }) => {\r\n        return !!this.state.list[index]\r\n    }\r\n\r\n    // 获取更多房屋列表数据  该方法返回 Peomise 对象, 并且数据加载完时要被解决\r\n    loadMoreRows = ({ startIndex, stopIndex }) => {\r\n        return new Promise ( resolve => {\r\n            API.get('/houses', {\r\n                params: {\r\n                    cityId: this.value,\r\n                    ...this.filters,\r\n                    start: startIndex,\r\n                    end: stopIndex\r\n                }\r\n            }).then( res => {\r\n                this.setState({\r\n                    list: [...this.state.list, ...res.data.body.list]\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    async componentDidMount () {\r\n        const {label, value} = await getCurrentCity();\r\n        this.label = label;\r\n        this.value = value;\r\n        this.searchHouseList();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles.root}>\r\n                {/* 搜索导航栏 */}\r\n                <Flex className={styles.header}>\r\n                    <i className=\"iconfont icon-back\" onClick={() => this.props.history.goBack()} />\r\n                    <SearchHeader currentCity={this.label} className={styles.searchHeader}/>\r\n                </Flex>\r\n\r\n                {/* 分选栏 */}\r\n                <Sticky height={40}>\r\n                    <Filter onFilter={this.onFilter} />\r\n                </Sticky>\r\n\r\n                {/* 房屋列表 */}\r\n                <div className={styles.houseItems}>\r\n                    {this.renderHouseItem()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"],"sourceRoot":""}